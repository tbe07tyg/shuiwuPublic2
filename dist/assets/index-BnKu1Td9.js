import{_ as ot,a8 as nt,h as T,e as ne,d as le,i as lt,u as it,f as v,m as rt,c as M,a as o,j as s,w as a,l,o as _,p as n,x as m,S as dt,R as ie,z as re,a9 as N,D as ut,k as y,b as P,t as u,n as de,U as pt,O as mt,T as ue,Z as ct,aa as _t,a4 as pe,F as gt,s as ft,y as vt}from"./index-CLrs7Nd9.js";import{R as me}from"./RocketOutlined-Cm_STHdO.js";import{S as F}from"./SettingOutlined-CAs0l5pH.js";import{I as yt}from"./InboxOutlined-D20kumRm.js";import{U as kt}from"./UploadOutlined-U6qGJXGO.js";import{D as wt}from"./DashboardOutlined-DO2Jftc3.js";const bt={class:"project-management"},xt={class:"search-section"},Dt={class:"info-section"},Ct={class:"status-flow"},St={style:{color:"#234fa2","margin-bottom":"12px"}},Mt={class:"flow-steps"},Tt={class:"flow-item"},Pt={class:"flow-item"},Ot={class:"flow-item"},ht={class:"flow-item"},It={class:"operation-guide"},zt={style:{color:"#234fa2","margin-bottom":"12px"}},$t={class:"operation-list"},jt={class:"operation-item"},Rt={class:"operation-item"},Ut={class:"operation-item"},At={class:"operation-item"},Bt={class:"sort-info"},Nt={style:{color:"#234fa2","margin-bottom":"8px"}},Ft={class:"sort-flow"},Kt={class:"sort-step"},qt={class:"sort-step"},Et={class:"sort-step"},Jt={class:"sort-step"},Lt={class:"actions-section"},Vt={class:"projects-section"},Ht={key:1,class:"progress-with-unread"},Wt={key:0,class:"project-detail"},Qt={key:0,class:"task-name-with-unread"},Zt={key:1,class:"task-assignee"},Gt={class:"member-option"},Xt={style:{color:"#999","margin-left":"8px"}},Yt={__name:"index",setup(es){const k=rt(),ce=it(),O=nt(),K=t=>{var g;const e=String(t.id),p=(g=O.computeProjectProgress)==null?void 0:g.call(O,e);return typeof p=="number"&&!Number.isNaN(p)?p:Number.isFinite(t.progress)?Math.round(t.progress):0},h=T(!1),I=T(!1),d=T(null),j=T("tasks"),q=T(["flow"]),w=ne({name:"",status:void 0,manager:""}),z=ne({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`第 ${e[0]}-${e[1]} 条/共 ${t} 条`}),C=T([{id:10001,name:"互动联调演示项目",code:"PRJ-2025-DEMO-001",status:"active",detailStatus:"active",priority:"high",progress:45,manager:"张经理",startDate:"2025-01-20",endDate:"2025-12-31",description:"用于验证团队成员更新进度/评论/操作历史在项目监控中的实时联动",nextMilestone:"中期检查",milestoneDate:"2025-08-31",isConfigured:!0,tasks:[{id:9001,name:"联调-前端集成与验证",status:"active",progress:30,assignedTo:{id:99,name:"张三(演示账号)",role:"developer"},startDate:"2025-01-22",endDate:"2025-02-15",description:"在团队成员看板侧更新进度与评论，观察项目监控侧的同步效果"},{id:9002,name:"联调-材料提交流转",status:"pending",progress:0,assignedTo:{id:99,name:"张三(演示账号)",role:"developer"},startDate:"2025-02-01",endDate:"2025-02-20",description:"从模板带出材料，成员提交，PM预审并转管理层"}],teamMembers:[{name:"张经理",role:"项目经理",status:"active"},{name:"张三(演示账号)",role:"前端开发",status:"active"}],files:[]},{id:1,name:"智能科研管理系统开发",code:"PRJ-2024-001",status:"active",detailStatus:"active",priority:"high",progress:75,manager:"张经理",startDate:"2024-01-15",endDate:"2024-06-30",description:"开发一套智能化的科研管理系统，提升科研项目管理效率",nextMilestone:"中期检查",milestoneDate:"2024-03-15",isConfigured:!0,tasks:[{id:1,name:"需求分析",status:"completed",progress:100},{id:2,name:"系统设计",status:"completed",progress:100},{id:3,name:"前端开发",status:"active",progress:80},{id:4,name:"后端开发",status:"active",progress:60},{id:5,name:"系统测试",status:"pending",progress:0}],teamMembers:[{name:"张经理",role:"项目经理",status:"active"},{name:"李开发",role:"前端开发",status:"active"},{name:"王后端",role:"后端开发",status:"active"},{name:"赵测试",role:"测试工程师",status:"active"}],files:[]},{id:2,name:"数据分析平台建设",code:"PRJ-2024-002",status:"planning",detailStatus:"configured",priority:"high",progress:30,manager:"李经理",startDate:"2024-02-01",endDate:"2024-08-31",description:"构建企业级数据分析平台，支持大数据处理和分析",nextMilestone:"项目开题",milestoneDate:"2024-02-15",isConfigured:!1,tasks:[{id:1,name:"需求调研",status:"completed",progress:100,assignedTo:{id:1,name:"张经理",role:"manager"},startDate:"2024-02-01",endDate:"2024-02-10",description:"调研用户需求和业务流程"},{id:2,name:"技术选型",status:"active",progress:80,assignedTo:{id:3,name:"王后端",role:"developer"},startDate:"2024-02-05",endDate:"2024-02-15",description:"选择合适的技术栈和架构方案"},{id:3,name:"架构设计",status:"pending",progress:0,assignedTo:null,startDate:"2024-02-12",endDate:"2024-02-20",description:"设计系统整体架构"}],teamMembers:[{name:"李经理",role:"项目经理",status:"active"},{name:"陈架构",role:"架构师",status:"active"}],files:[]},{id:4,name:"区块链存证系统",code:"PRJ-2024-004",status:"planning",detailStatus:"just_approved",priority:"high",progress:0,manager:"赵经理",startDate:"2024-02-10",endDate:"2024-07-30",description:"基于区块链技术的数据存证系统开发",nextMilestone:"需要配置",milestoneDate:null,isConfigured:!1,tasks:[],teamMembers:[],files:[]},{id:5,name:"（占位，待新增项目）",code:"PRJ-PLACEHOLDER-001",status:"planning",detailStatus:"just_approved",priority:"medium",progress:0,manager:"待定",startDate:"2024-03-01",endDate:"2024-09-30",description:"请通过新增项目功能录入真实项目",nextMilestone:"项目开题",milestoneDate:null,isConfigured:!1,tasks:[],teamMembers:[],files:[]},{id:6,name:"区块链存证系统",code:"PRJ-2024-004",status:"planning",detailStatus:"just_approved",priority:"medium",progress:0,manager:"赵经理",startDate:"2024-02-10",endDate:"2024-07-30",description:"需要完成项目配置",nextMilestone:"需要完成配置",milestoneDate:"2024-02-15",isConfigured:!1,tasks:[],teamMembers:[],files:[]}]),E=t=>({planning:1,active:2,completed:3})[t]||999,_e=le(()=>[...C.value].sort((t,e)=>{const p=E(t.status),g=E(e.status);if(p!==g)return p-g;const S={high:1,medium:2,low:3},$=S[t.priority]||4,f=S[e.priority]||4;return $!==f?$-f:new Date(e.startDate)-new Date(t.startDate)})),ge=[{title:"项目名称",dataIndex:"name",key:"name",width:200,fixed:"left"},{title:"项目编号",dataIndex:"code",key:"code",width:120},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"状态提示",key:"statusHint",width:160},{title:"优先级",dataIndex:"priority",key:"priority",width:100},{title:"进度",dataIndex:"progress",key:"progress",width:150},{title:"项目经理",dataIndex:"manager",key:"manager",width:120},{title:"开始日期",dataIndex:"startDate",key:"startDate",width:120},{title:"结束日期",dataIndex:"endDate",key:"endDate",width:120},{title:"操作",key:"action",width:200,fixed:"right"}],fe=[{title:"任务名称",dataIndex:"name",key:"name"},{title:"分配给",dataIndex:"assignedTo",key:"assignedTo",width:150},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"进度",dataIndex:"progress",key:"progress",width:150},{title:"操作",key:"action",width:120}],J=t=>({active:"blue",planning:"orange",completed:"green",suspended:"red"})[t]||"default",L=t=>({active:"进行中",planning:"规划中",completed:"已完成"})[t]||"未知",V=t=>({high:"red",medium:"orange",low:"green"})[t]||"default",H=t=>({high:"高",medium:"中",low:"低"})[t]||"未知",W=le(()=>[{id:1,name:"张经理",role:"manager"},{id:2,name:"李开发",role:"developer"},{id:3,name:"王后端",role:"developer"},{id:4,name:"赵测试",role:"tester"},{id:5,name:"钱设计",role:"designer"},{id:6,name:"孙产品",role:"product"},{id:7,name:"周架构",role:"architect"}]),ve=(t,e)=>{if(!e){t.assignedTo=null,v.info("已取消任务分配");return}const p=W.value.find(g=>g.id===e);p&&(t.assignedTo=p,v.success(`任务"${t.name}"已分配给${p.name}`))},ye=t=>{console.log("编辑任务:",t),v.info("任务编辑功能开发中...")},ke=t=>{console.log("删除任务:",t),v.warning("确认删除此任务吗？")},Q=t=>t>=80?"#52c41a":t>=60?"#1890ff":t>=40?"#faad14":"#f5222d",we=t=>({completed:"green",active:"blue",pending:"orange",suspended:"red"})[t]||"default",be=t=>({completed:"已完成",active:"进行中",pending:"待开始",suspended:"已暂停"})[t]||"未知",Z=()=>{console.log("搜索条件:",w),h.value=!0,setTimeout(()=>{h.value=!1},1e3)},xe=()=>{Object.assign(w,{name:"",status:void 0,manager:""}),Z()},De=t=>{z.current=t.current,z.pageSize=t.pageSize},Ce=t=>{d.value=t,I.value=!0},Se=t=>{console.log("编辑项目:",t),k.push(`/project-manager/projects/${t.id}/edit`)},Me=t=>{console.log("复制项目:",t)},G=t=>{console.log("归档项目:",t)},Te=t=>{console.log("删除项目:",t)},Pe=()=>{console.log("批量导出")},Oe=()=>{h.value=!0,setTimeout(()=>{h.value=!1},1e3)},X=t=>O.getUnreadCountForProject(String(t)),Y=(t,e)=>O.getUnreadCountForTask(String(t),String(e)),he=()=>{k.push("/project/archive/completed")},Ie=t=>({just_approved:"需要完成项目配置",configured:"可以启动项目执行",active:"项目正常进行中",milestone_due:`${t.nextMilestone}即将到期`,completed:"项目已完成可归档"})[t.detailStatus]||"状态未知",ze=t=>({just_approved:"primary",configured:"primary",active:"primary",milestone_due:"primary",completed:"default"})[t]||"default",$e=t=>({just_approved:"立即配置",configured:"启动项目",active:"项目监控",milestone_due:"准备材料",completed:"项目归档"})[t]||"操作",je=t=>({just_approved:F,configured:me,active:wt,milestone_due:re,completed:vt})[t]||F,Re=t=>{switch(t.detailStatus){case"just_approved":Ue(t);break;case"configured":Be(t);break;case"active":Ne(t);break;case"milestone_due":Fe(t);break;case"completed":G(t);break;default:v.info("操作功能开发中")}},Ue=t=>{k.push({path:"/project-manager/projects/config-wizard",query:{projectId:t.id,projectName:t.name,projectCode:t.code}})},Ae=(t,e)=>{const p=C.value.findIndex(g=>g.id===t);p!==-1&&(C.value[p].status=e,C.value[p].detailStatus="active",console.log("项目状态已更新:",t,e))},Be=t=>{if(!t.teamMembers||t.teamMembers.length===0){v.warning("请先分配团队成员再启动项目！"),d.value=t,j.value="members",I.value=!0;return}if(!t.tasks||t.tasks.length===0){v.warning("请先配置项目任务结构再启动项目！"),d.value=t,j.value="tasks",I.value=!0;return}window.confirm(`确认启动项目"${t.name}"吗？

启动后项目将进入执行阶段，团队成员将开始按照WBS计划执行任务。`)&&(Ae(t.id,"active"),k.push({path:`/project-manager/projects/monitor/${t.id}`}),v.success(`项目"${t.name}"已成功启动！进入项目监控页面`))},Ne=t=>{k.push({path:`/project-manager/projects/monitor/${t.id}`,query:{name:t.name,code:t.code,progress:t.progress,startDate:t.startDate,endDate:t.endDate}}),v.info(`进入项目监控: ${t.name}`)},Fe=t=>{const e={projectId:t.id,projectName:t.name,projectCode:t.code,fromPM:"true",milestoneType:t.nextMilestone};t.nextMilestone.includes("开题")?(k.push({path:"/opening/application/submit",query:e}),v.info("正在跳转到开题材料提交页面...")):t.nextMilestone.includes("中期")?(k.push({path:"/midterm/application/submit",query:e}),v.info("正在跳转到中期材料提交页面...")):t.nextMilestone.includes("验收")?(k.push({path:"/acceptance/application/submit",query:e}),v.info("正在跳转到验收材料提交页面...")):(v.warning(`未识别的里程碑类型：${t.nextMilestone}`),console.log("需要为未知里程碑类型提供通用材料管理界面")),console.log("里程碑材料准备操作:",{projectId:t.id,milestoneType:t.nextMilestone,timestamp:new Date().toISOString(),action:"prepare_milestone_materials"})};lt(()=>{z.total=C.value.length,Ke()});const Ke=()=>{const{fromApproval:t,projectId:e,autoCreated:p}=ce.query;if(t==="true"&&p==="true"&&e){v.success({content:`项目立项通过！项目已自动添加到管理列表中，项目ID: ${e}`,duration:5});const g={id:e,name:`立项项目-${e}`,status:"active",manager:"当前用户",progress:0,budget:"待确定",startDate:new Date().toISOString().split("T")[0],endDate:"待确定",description:"来自立项自动创建的项目",isAutoCreated:!0,fromApproval:!0};C.value.unshift(g),z.total=C.value.length,k.replace({path:"/project-manager/projects"})}};return(t,e)=>{const p=l("a-input"),g=l("a-form-item"),S=l("a-select-option"),$=l("a-select"),f=l("a-button"),qe=l("a-form"),ee=l("a-card"),Ee=l("a-alert"),c=l("a-tag"),te=l("a-col"),Je=l("a-row"),se=l("a-divider"),Le=l("a-collapse-panel"),Ve=l("a-collapse"),R=l("a-space"),U=l("a-progress"),ae=l("a-badge"),A=l("a-menu-item"),He=l("a-menu-divider"),We=l("a-menu"),Qe=l("a-dropdown"),oe=l("a-table"),b=l("a-descriptions-item"),Ze=l("a-descriptions"),B=l("a-tab-pane"),Ge=l("a-avatar"),Xe=l("a-list-item-meta"),Ye=l("a-list-item"),et=l("a-list"),tt=l("a-upload"),st=l("a-tabs"),at=l("a-modal");return _(),M("div",bt,[e[55]||(e[55]=o("div",{class:"page-header"},[o("h1",null,"项目管理"),o("p",{class:"subtitle"},"项目列表与详情管理")],-1)),o("div",xt,[s(ee,{class:"search-card"},{default:a(()=>[s(qe,{layout:"inline",model:w},{default:a(()=>[s(g,{label:"项目名称"},{default:a(()=>[s(p,{value:w.name,"onUpdate:value":e[0]||(e[0]=r=>w.name=r),placeholder:"请输入项目名称","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),s(g,{label:"项目状态"},{default:a(()=>[s($,{value:w.status,"onUpdate:value":e[1]||(e[1]=r=>w.status=r),placeholder:"请选择状态","allow-clear":"",style:{width:"150px"}},{default:a(()=>[s(S,{value:"active"},{default:a(()=>e[6]||(e[6]=[n("进行中",-1)])),_:1,__:[6]}),s(S,{value:"planning"},{default:a(()=>e[7]||(e[7]=[n("规划中",-1)])),_:1,__:[7]}),s(S,{value:"completed"},{default:a(()=>e[8]||(e[8]=[n("已完成",-1)])),_:1,__:[8]})]),_:1},8,["value"])]),_:1}),s(g,{label:"项目经理"},{default:a(()=>[s(p,{value:w.manager,"onUpdate:value":e[2]||(e[2]=r=>w.manager=r),placeholder:"请输入项目经理","allow-clear":"",style:{width:"150px"}},null,8,["value"])]),_:1}),s(g,null,{default:a(()=>[s(f,{type:"primary",onClick:Z},{default:a(()=>[s(m(dt)),e[9]||(e[9]=n(" 搜索 ",-1))]),_:1,__:[9]}),s(f,{style:{"margin-left":"8px"},onClick:xe},{default:a(()=>[s(m(ie)),e[10]||(e[10]=n(" 重置 ",-1))]),_:1,__:[10]})]),_:1})]),_:1},8,["model"])]),_:1})]),o("div",Dt,[s(Ee,{message:"项目来源说明",description:"项目由立项审批通过后自动创建，项目经理无需手动添加项目。所有项目均来自已通过审批的立项申请。",type:"info","show-icon":"",style:{"margin-bottom":"16px"}}),s(Ve,{activeKey:q.value,"onUpdate:activeKey":e[3]||(e[3]=r=>q.value=r),size:"small",style:{"margin-bottom":"16px"},bordered:!1,class:"flow-collapse"},{default:a(()=>[s(Le,{key:"flow",header:"📋 项目状态与操作流程"},{default:a(()=>[s(Je,{gutter:[16,16]},{default:a(()=>[s(te,{span:12},{default:a(()=>[o("div",Ct,[o("h4",St,[s(m(me)),e[11]||(e[11]=n(" 项目状态流程 ",-1))]),o("div",Mt,[o("div",Tt,[s(c,{color:"orange"},{default:a(()=>e[12]||(e[12]=[n("1. 规划中",-1)])),_:1,__:[12]}),e[13]||(e[13]=o("span",{class:"flow-desc"},"立项通过 → 等待配置",-1))]),e[20]||(e[20]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",Pt,[s(c,{color:"cyan"},{default:a(()=>e[14]||(e[14]=[n("2. 已配置",-1)])),_:1,__:[14]}),e[15]||(e[15]=o("span",{class:"flow-desc"},"配置完成 → 等待启动",-1))]),e[21]||(e[21]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",Ot,[s(c,{color:"blue"},{default:a(()=>e[16]||(e[16]=[n("3. 进行中",-1)])),_:1,__:[16]}),e[17]||(e[17]=o("span",{class:"flow-desc"},"项目启动 → 执行监控",-1))]),e[22]||(e[22]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",ht,[s(c,{color:"green"},{default:a(()=>e[18]||(e[18]=[n("4. 已完成",-1)])),_:1,__:[18]}),e[19]||(e[19]=o("span",{class:"flow-desc"},"项目结束 → 成果归档",-1))])])])]),_:1}),s(te,{span:12},{default:a(()=>[o("div",It,[o("h4",zt,[s(m(F)),e[23]||(e[23]=n(" 对应操作说明 ",-1))]),o("div",$t,[o("div",jt,[s(c,{color:"orange"},{default:a(()=>e[24]||(e[24]=[n("1. 立即配置",-1)])),_:1,__:[24]}),e[25]||(e[25]=o("span",null,"设置WBS任务、分配团队成员",-1))]),e[33]||(e[33]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",Rt,[s(c,{color:"cyan"},{default:a(()=>e[26]||(e[26]=[n("2. 启动项目",-1)])),_:1,__:[26]}),e[27]||(e[27]=o("span",null,"验证团队&任务 → 正式启动",-1))]),e[34]||(e[34]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",Ut,[s(c,{color:"blue"},{default:a(()=>e[28]||(e[28]=[n("3. 项目监控",-1)])),_:1,__:[28]}),e[29]||(e[29]=o("span",null,"查看进度甘特图和任务管理",-1))]),e[35]||(e[35]=o("div",{class:"flow-arrow"},"↓",-1)),o("div",At,[s(c,{color:"green"},{default:a(()=>e[30]||(e[30]=[n("4. 项目归档",-1)])),_:1,__:[30]}),e[32]||(e[32]=o("span",null,"成果整理和文档归档",-1)),s(f,{type:"link",size:"small",onClick:he,style:{padding:"0","margin-left":"8px"}},{default:a(()=>e[31]||(e[31]=[n(" 查看归档 → ",-1)])),_:1,__:[31]})])])])]),_:1})]),_:1}),s(se,{style:{margin:"16px 0"}}),o("div",Bt,[o("h4",Nt,[s(m(re)),e[36]||(e[36]=n(" 列表排序规则 ",-1))]),e[45]||(e[45]=o("p",{style:{color:"#666",margin:"0 0 12px 0"}},[n(" 项目列表按照 "),o("strong",null,"状态流程顺序"),n(" 和 "),o("strong",null,"操作紧急度"),n(" 从上往下排序： ")],-1)),o("div",Ft,[o("div",Kt,[s(c,{color:"orange",size:"small"},{default:a(()=>e[37]||(e[37]=[n("规划中",-1)])),_:1,__:[37]}),e[38]||(e[38]=o("span",{class:"sort-desc"},"需要立即配置 (最高优先级)",-1))]),s(m(N),{class:"sort-arrow"}),o("div",qt,[s(c,{color:"cyan",size:"small"},{default:a(()=>e[39]||(e[39]=[n("已配置",-1)])),_:1,__:[39]}),e[40]||(e[40]=o("span",{class:"sort-desc"},"等待启动",-1))]),s(m(N),{class:"sort-arrow"}),o("div",Et,[s(c,{color:"blue",size:"small"},{default:a(()=>e[41]||(e[41]=[n("进行中",-1)])),_:1,__:[41]}),e[42]||(e[42]=o("span",{class:"sort-desc"},"持续监控",-1))]),s(m(N),{class:"sort-arrow"}),o("div",Jt,[s(c,{color:"green",size:"small"},{default:a(()=>e[43]||(e[43]=[n("已完成",-1)])),_:1,__:[43]}),e[44]||(e[44]=o("span",{class:"sort-desc"},"进行归档",-1))])])])]),_:1})]),_:1},8,["activeKey"])]),o("div",Lt,[s(R,null,{default:a(()=>[s(f,{onClick:Pe},{default:a(()=>[s(m(ut)),e[46]||(e[46]=n(" 批量导出 ",-1))]),_:1,__:[46]}),s(f,{onClick:Oe},{default:a(()=>[s(m(ie)),e[47]||(e[47]=n(" 刷新 ",-1))]),_:1,__:[47]})]),_:1})]),o("div",Vt,[s(ee,{class:"projects-card"},{default:a(()=>[s(oe,{dataSource:_e.value,columns:ge,loading:h.value,pagination:z,rowKey:"id",onChange:De},{bodyCell:a(({column:r,record:i})=>[r.key==="status"?(_(),y(c,{key:0,color:J(i.status)},{default:a(()=>[n(u(L(i.status)),1)]),_:2},1032,["color"])):r.key==="progress"?(_(),M("div",Ht,[s(U,{percent:K(i),"stroke-color":Q(K(i)),size:"small"},null,8,["percent","stroke-color"]),X(i.id)>0?(_(),y(ae,{key:0,count:X(i.id),"overflow-count":99,class:"progress-unread-badge"},null,8,["count"])):P("",!0)])):r.key==="priority"?(_(),y(c,{key:2,color:V(i.priority)},{default:a(()=>[n(u(H(i.priority)),1)]),_:2},1032,["color"])):r.key==="statusHint"?(_(),M("span",{key:3,class:de(["status-hint",`hint-${i.detailStatus}`])},u(Ie(i)),3)):r.key==="action"?(_(),y(R,{key:4},{default:a(()=>[s(f,{type:ze(i.detailStatus),size:"small",onClick:x=>Re(i),class:de(`btn-${i.detailStatus}`)},{default:a(()=>[(_(),y(pt(je(i.detailStatus)))),n(" "+u($e(i.detailStatus)),1)]),_:2},1032,["type","onClick","class"]),s(f,{type:"link",size:"small",onClick:x=>Ce(i)},{default:a(()=>[s(m(mt)),e[48]||(e[48]=n(" 查看 ",-1))]),_:2,__:[48]},1032,["onClick"]),s(f,{type:"link",size:"small",onClick:x=>Se(i)},{default:a(()=>[s(m(ue)),e[49]||(e[49]=n(" 编辑 ",-1))]),_:2,__:[49]},1032,["onClick"]),s(Qe,null,{overlay:a(()=>[s(We,null,{default:a(()=>[s(A,{onClick:x=>Me(i)},{default:a(()=>[s(m(_t)),e[51]||(e[51]=n(" 复制项目 ",-1))]),_:2,__:[51]},1032,["onClick"]),s(A,{onClick:x=>G(i)},{default:a(()=>[s(m(yt)),e[52]||(e[52]=n(" 归档项目 ",-1))]),_:2,__:[52]},1032,["onClick"]),s(He),s(A,{danger:"",onClick:x=>Te(i)},{default:a(()=>[s(m(pe)),e[53]||(e[53]=n(" 删除项目 ",-1))]),_:2,__:[53]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[s(f,{type:"link",size:"small"},{default:a(()=>[e[50]||(e[50]=n(" 更多 ",-1)),s(m(ct))]),_:1,__:[50]})]),_:2},1024)]),_:2},1024)):P("",!0)]),_:1},8,["dataSource","loading","pagination"])]),_:1})]),s(at,{open:I.value,"onUpdate:open":e[5]||(e[5]=r=>I.value=r),title:"项目详情",width:"800px",footer:null,"destroy-on-close":""},{default:a(()=>[d.value?(_(),M("div",Wt,[s(Ze,{title:"基本信息",column:2,bordered:""},{default:a(()=>[s(b,{label:"项目名称"},{default:a(()=>[n(u(d.value.name),1)]),_:1}),s(b,{label:"项目编号"},{default:a(()=>[n(u(d.value.code),1)]),_:1}),s(b,{label:"项目经理"},{default:a(()=>[n(u(d.value.manager),1)]),_:1}),s(b,{label:"项目状态"},{default:a(()=>[s(c,{color:J(d.value.status)},{default:a(()=>[n(u(L(d.value.status)),1)]),_:1},8,["color"])]),_:1}),s(b,{label:"优先级"},{default:a(()=>[s(c,{color:V(d.value.priority)},{default:a(()=>[n(u(H(d.value.priority)),1)]),_:1},8,["color"])]),_:1}),s(b,{label:"项目进度"},{default:a(()=>[s(U,{percent:d.value.progress,"stroke-color":Q(d.value.progress)},null,8,["percent","stroke-color"])]),_:1}),s(b,{label:"开始日期"},{default:a(()=>[n(u(d.value.startDate),1)]),_:1}),s(b,{label:"结束日期"},{default:a(()=>[n(u(d.value.endDate),1)]),_:1}),s(b,{label:"项目描述",span:2},{default:a(()=>[n(u(d.value.description),1)]),_:1})]),_:1}),s(se),s(st,{activeKey:j.value,"onUpdate:activeKey":e[4]||(e[4]=r=>j.value=r)},{default:a(()=>[s(B,{key:"tasks",tab:"任务列表"},{default:a(()=>[s(oe,{dataSource:d.value.tasks,columns:fe,pagination:!1,size:"small"},{bodyCell:a(({column:r,record:i})=>{var x;return[r.key==="name"?(_(),M("div",Qt,[o("span",null,u(i.name),1),Y(d.value.id,i.id)>0?(_(),y(ae,{key:0,count:Y(d.value.id,i.id),"overflow-count":99,class:"task-unread-badge"},null,8,["count"])):P("",!0)])):P("",!0),r.key==="assignedTo"?(_(),M("div",Zt,[s($,{value:(x=i.assignedTo)==null?void 0:x.id,placeholder:"选择成员",style:{width:"120px"},size:"small","allow-clear":"",onChange:D=>ve(i,D)},{default:a(()=>[(_(!0),M(gt,null,ft(W.value,D=>(_(),y(S,{key:D.id,value:D.id},{default:a(()=>[o("div",Gt,[o("span",null,u(D.name),1),o("small",Xt,u(D.role),1)])]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onChange"])])):r.key==="status"?(_(),y(c,{key:2,color:we(i.status)},{default:a(()=>[n(u(be(i.status)),1)]),_:2},1032,["color"])):r.key==="progress"?(_(),y(U,{key:3,percent:i.progress,size:"small"},null,8,["percent"])):r.key==="action"?(_(),y(R,{key:4,size:"small"},{default:a(()=>[s(f,{type:"link",size:"small",onClick:D=>ye(i)},{default:a(()=>[s(m(ue))]),_:2},1032,["onClick"]),s(f,{type:"link",size:"small",danger:"",onClick:D=>ke(i)},{default:a(()=>[s(m(pe))]),_:2},1032,["onClick"])]),_:2},1024)):P("",!0)]}),_:1},8,["dataSource"])]),_:1}),s(B,{key:"team",tab:"团队成员"},{default:a(()=>[s(et,{dataSource:d.value.teamMembers,"item-layout":"horizontal"},{renderItem:a(({item:r})=>[s(Ye,null,{actions:a(()=>[s(c,{color:r.status==="active"?"green":"orange"},{default:a(()=>[n(u(r.status==="active"?"在线":"离线"),1)]),_:2},1032,["color"])]),default:a(()=>[s(Xe,null,{avatar:a(()=>[s(Ge,null,{default:a(()=>[n(u(r.name.charAt(0)),1)]),_:2},1024)]),title:a(()=>[n(u(r.name),1)]),description:a(()=>[n(u(r.role),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["dataSource"])]),_:1}),s(B,{key:"files",tab:"项目文件"},{default:a(()=>[s(tt,{"file-list":d.value.files,"show-upload-list":{showPreviewIcon:!0,showRemoveIcon:!0}},{default:a(()=>[s(f,null,{default:a(()=>[s(m(kt)),e[54]||(e[54]=n(" 上传文件 ",-1))]),_:1,__:[54]})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["activeKey"])])):P("",!0)]),_:1},8,["open"])])}}},is=ot(Yt,[["__scopeId","data-v-b9546cbb"]]);export{is as default};
