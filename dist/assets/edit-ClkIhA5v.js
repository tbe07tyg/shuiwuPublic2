import{_ as G,h as D,d as x,u as H,e as J,i as K,c as Q,a as r,j as a,w as s,l as u,t as k,v as i,f as v,m as W,o as X,p as g}from"./index-CLrs7Nd9.js";const Y={class:"project-edit-page"},Z={class:"page-header"},ee={class:"subtitle"},ae={class:"edit-content"},te={class:"form-section"},le={class:"form-section"},se={class:"form-section"},ne={style:{"margin-left":"16px",color:"#666"}},oe={class:"form-section"},re={class:"form-section"},ue={class:"form-actions"},de={__name:"edit",setup(ie){const U=W(),B=H(),b=D(),c=D(!1),q=x(()=>B.params.id),t=J({name:"",type:"",status:"",leader:"",dept:"",startDate:null,endDate:null,actualStartDate:null,actualEndDate:null,description:"",budget:null,usedBudget:0,progress:0,priority:"",teamMembers:[],editReason:"",remarks:""}),O=x(()=>(t.budget||0)-(t.usedBudget||0)),R={name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:100,message:"项目名称长度在2-100个字符",trigger:"blur"}],type:[{required:!0,message:"请选择项目类型",trigger:"change"}],status:[{required:!0,message:"请选择项目状态",trigger:"change"}],leader:[{required:!0,message:"请选择项目负责人",trigger:"change"}],dept:[{required:!0,message:"请选择所属部门",trigger:"change"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"change"}],endDate:[{required:!0,message:"请选择结束时间",trigger:"change"}],budget:[{required:!0,message:"请输入申请预算",trigger:"blur"},{type:"number",min:.01,message:"预算必须大于0",trigger:"blur"}],editReason:[{required:!0,message:"请说明修改原因",trigger:"blur"}]},S=[{label:"研发项目",value:"research"},{label:"工程项目",value:"engineering"},{label:"咨询项目",value:"consulting"},{label:"培训项目",value:"training"}],j=[{label:"规划中",value:"planning"},{label:"进行中",value:"active"},{label:"已暂停",value:"suspended"},{label:"已完成",value:"completed"},{label:"已取消",value:"cancelled"}],C=[{label:"低",value:"low"},{label:"中",value:"medium"},{label:"高",value:"high"},{label:"紧急",value:"urgent"}],E=[{label:"技术研发部",value:"tech"},{label:"市场部",value:"marketing"},{label:"产品部",value:"product"},{label:"财务部",value:"finance"},{label:"人力资源部",value:"hr"}],z=[{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"},{label:"王五",value:"wangwu"},{label:"赵六",value:"zhaoliu"}],M=[{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"},{label:"王五",value:"wangwu"},{label:"赵六",value:"zhaoliu"},{label:"钱七",value:"qianqi"},{label:"孙八",value:"sunba"}],w=(o,e)=>e.label.toLowerCase().indexOf(o.toLowerCase())>=0,F=o=>o&&o<i().startOf("day"),I=o=>t.startDate?o&&o<i(t.startDate):!1,h=async()=>{try{const o={name:"智能办公系统开发",type:"research",status:"active",leader:"zhangsan",dept:"tech",startDate:i("2024-01-01"),endDate:i("2024-12-31"),actualStartDate:i("2024-01-05"),actualEndDate:null,description:"开发一套智能化的办公管理系统，提高工作效率",budget:100,usedBudget:35,progress:45,priority:"high",teamMembers:["lisi","wangwu"],remarks:"项目进展顺利"};Object.assign(t,o),v.success("项目数据加载成功")}catch(o){console.error("加载项目数据失败:",o),v.error("加载项目数据失败")}},N=async()=>{try{await b.value.validate(),c.value=!0,await new Promise(o=>setTimeout(o,1e3)),v.success("项目信息更新成功"),f()}catch(o){console.error("保存失败:",o),v.error("保存失败，请检查表单信息")}finally{c.value=!1}},P=()=>{b.value.resetFields(),h()},f=()=>{U.go(-1)};return K(()=>{h()}),(o,e)=>{const p=u("a-button"),V=u("a-alert"),L=u("a-input"),n=u("a-form-item"),d=u("a-select"),m=u("a-date-picker"),_=u("a-textarea"),y=u("a-input-number"),T=u("a-slider"),$=u("a-space"),A=u("a-form");return X(),Q("div",Y,[r("div",Z,[a(p,{type:"link",onClick:f},{default:s(()=>e[17]||(e[17]=[g("返回",-1)])),_:1,__:[17]}),e[18]||(e[18]=r("h1",{class:"page-title"},"编辑项目",-1)),r("p",ee,"项目ID: "+k(q.value),1)]),r("div",ae,[a(V,{message:"项目编辑",description:"修改项目信息，保存后将更新项目数据。请谨慎修改关键信息。",type:"warning","show-icon":"",style:{"margin-bottom":"32px"}}),a(A,{model:t,rules:R,onFinish:N,ref_key:"formRef",ref:b,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:16}},{default:s(()=>[r("div",te,[e[19]||(e[19]=r("h3",{class:"section-title"},"项目基本信息",-1)),a(n,{label:"项目名称",name:"name"},{default:s(()=>[a(L,{value:t.name,"onUpdate:value":e[0]||(e[0]=l=>t.name=l),placeholder:"请输入项目名称",maxlength:100,"show-count":""},null,8,["value"])]),_:1}),a(n,{label:"项目类型",name:"type"},{default:s(()=>[a(d,{value:t.type,"onUpdate:value":e[1]||(e[1]=l=>t.type=l),options:S,placeholder:"请选择项目类型"},null,8,["value"])]),_:1}),a(n,{label:"项目状态",name:"status"},{default:s(()=>[a(d,{value:t.status,"onUpdate:value":e[2]||(e[2]=l=>t.status=l),options:j,placeholder:"请选择项目状态"},null,8,["value"])]),_:1}),a(n,{label:"项目负责人",name:"leader"},{default:s(()=>[a(d,{value:t.leader,"onUpdate:value":e[3]||(e[3]=l=>t.leader=l),options:z,placeholder:"请选择项目负责人","show-search":"","filter-option":w},null,8,["value"])]),_:1}),a(n,{label:"所属部门",name:"dept"},{default:s(()=>[a(d,{value:t.dept,"onUpdate:value":e[4]||(e[4]=l=>t.dept=l),options:E,placeholder:"请选择所属部门"},null,8,["value"])]),_:1}),a(n,{label:"计划开始时间",name:"startDate"},{default:s(()=>[a(m,{value:t.startDate,"onUpdate:value":e[5]||(e[5]=l=>t.startDate=l),placeholder:"请选择开始时间",style:{width:"100%"},"disabled-date":F},null,8,["value"])]),_:1}),a(n,{label:"计划结束时间",name:"endDate"},{default:s(()=>[a(m,{value:t.endDate,"onUpdate:value":e[6]||(e[6]=l=>t.endDate=l),placeholder:"请选择结束时间",style:{width:"100%"},"disabled-date":I},null,8,["value"])]),_:1}),a(n,{label:"实际开始时间",name:"actualStartDate"},{default:s(()=>[a(m,{value:t.actualStartDate,"onUpdate:value":e[7]||(e[7]=l=>t.actualStartDate=l),placeholder:"请选择实际开始时间",style:{width:"100%"}},null,8,["value"])]),_:1}),a(n,{label:"实际结束时间",name:"actualEndDate"},{default:s(()=>[a(m,{value:t.actualEndDate,"onUpdate:value":e[8]||(e[8]=l=>t.actualEndDate=l),placeholder:"请选择实际结束时间",style:{width:"100%"}},null,8,["value"])]),_:1}),a(n,{label:"项目简介",name:"description"},{default:s(()=>[a(_,{value:t.description,"onUpdate:value":e[9]||(e[9]=l=>t.description=l),placeholder:"请简要描述项目背景、目标、主要内容和预期成果等",rows:5,maxlength:1e3,"show-count":""},null,8,["value"])]),_:1})]),r("div",le,[e[20]||(e[20]=r("h3",{class:"section-title"},"预算信息",-1)),a(n,{label:"申请预算",name:"budget"},{default:s(()=>[a(y,{value:t.budget,"onUpdate:value":e[10]||(e[10]=l=>t.budget=l),min:0,max:999999,precision:2,style:{width:"300px"},placeholder:"请输入申请预算","addon-after":"万元"},null,8,["value"])]),_:1}),a(n,{label:"已用预算",name:"usedBudget"},{default:s(()=>[a(y,{value:t.usedBudget,"onUpdate:value":e[11]||(e[11]=l=>t.usedBudget=l),min:0,max:t.budget||999999,precision:2,style:{width:"300px"},placeholder:"请输入已使用预算","addon-after":"万元",disabled:""},null,8,["value","max"])]),_:1}),a(n,{label:"剩余预算",name:"remainingBudget"},{default:s(()=>[a(y,{value:O.value,precision:2,style:{width:"300px"},"addon-after":"万元",disabled:""},null,8,["value"])]),_:1})]),r("div",se,[e[21]||(e[21]=r("h3",{class:"section-title"},"进度信息",-1)),a(n,{label:"项目进度",name:"progress"},{default:s(()=>[a(T,{value:t.progress,"onUpdate:value":e[12]||(e[12]=l=>t.progress=l),min:0,max:100,"tooltip-formatter":l=>`${l}%`,style:{width:"300px"}},null,8,["value","tooltip-formatter"]),r("span",ne,k(t.progress)+"%",1)]),_:1}),a(n,{label:"项目优先级",name:"priority"},{default:s(()=>[a(d,{value:t.priority,"onUpdate:value":e[13]||(e[13]=l=>t.priority=l),options:C,placeholder:"请选择优先级"},null,8,["value"])]),_:1})]),r("div",oe,[e[22]||(e[22]=r("h3",{class:"section-title"},"团队信息",-1)),a(n,{label:"团队成员",name:"teamMembers"},{default:s(()=>[a(d,{value:t.teamMembers,"onUpdate:value":e[14]||(e[14]=l=>t.teamMembers=l),mode:"multiple",options:M,placeholder:"请选择团队成员","show-search":"","filter-option":w},null,8,["value"])]),_:1})]),r("div",re,[e[23]||(e[23]=r("h3",{class:"section-title"},"备注信息",-1)),a(n,{label:"修改原因",name:"editReason"},{default:s(()=>[a(_,{value:t.editReason,"onUpdate:value":e[15]||(e[15]=l=>t.editReason=l),placeholder:"请说明本次修改的原因",rows:3,maxlength:500,"show-count":""},null,8,["value"])]),_:1}),a(n,{label:"备注",name:"remarks"},{default:s(()=>[a(_,{value:t.remarks,"onUpdate:value":e[16]||(e[16]=l=>t.remarks=l),placeholder:"其他备注信息",rows:3,maxlength:500,"show-count":""},null,8,["value"])]),_:1})]),r("div",ue,[a($,null,{default:s(()=>[a(p,{type:"primary","html-type":"submit",loading:c.value},{default:s(()=>e[24]||(e[24]=[g(" 保存修改 ",-1)])),_:1,__:[24]},8,["loading"]),a(p,{onClick:P},{default:s(()=>e[25]||(e[25]=[g("重置",-1)])),_:1,__:[25]}),a(p,{onClick:f},{default:s(()=>e[26]||(e[26]=[g("取消",-1)])),_:1,__:[26]})]),_:1})])]),_:1},8,["model"])])])}}},me=G(de,[["__scopeId","data-v-72d3f2db"]]);export{me as default};
