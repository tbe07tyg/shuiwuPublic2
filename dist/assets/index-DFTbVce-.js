import{j as e,I as Se,_ as je,d as G,h as y,i as Me,c as f,o as u,a as n,k as $,b as R,p as s,x as P,w as t,l as i,F as M,s as de,t as c,P as et,v as ge,f as S,D as tt,n as at}from"./index-CLrs7Nd9.js";import{D as Ge}from"./DollarOutlined-oEhX2Qfg.js";import{U as ze}from"./UserOutlined-BFkHhxCn.js";import{I as nt}from"./InboxOutlined-D20kumRm.js";import{U as ot}from"./UploadOutlined-U6qGJXGO.js";import{D as st}from"./DashboardOutlined-DO2Jftc3.js";import{P as lt}from"./PieChartOutlined-yJ1iVs9T.js";import{A as ut}from"./AlertOutlined-o7MIJ1YP.js";var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zm-126 534.1H250.3l-53.8-409.4 139.8 86.1L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4zM512 509c-62.1 0-112.6 50.5-112.6 112.6S449.9 734.2 512 734.2s112.6-50.5 112.6-112.6S574.1 509 512 509zm0 160.9c-26.6 0-48.2-21.6-48.2-48.3 0-26.6 21.6-48.3 48.2-48.3s48.2 21.6 48.2 48.3c0 26.6-21.6 48.3-48.2 48.3z"}}]},name:"crown",theme:"outlined"};function qe(g){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?Object(arguments[p]):{},k=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(v).filter(function(h){return Object.getOwnPropertyDescriptor(v,h).enumerable}))),k.forEach(function(h){rt(g,h,v[h])})}return g}function rt(g,p,v){return p in g?Object.defineProperty(g,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[p]=v,g}var pe=function(p,v){var k=qe({},p,v.attrs);return e(Se,qe({},k,{icon:it}),null)};pe.displayName="CrownOutlined";pe.inheritAttrs=!1;var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926 164H94c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V196c0-17.7-14.3-32-32-32zm-40 632H134V236h752v560zm-658.9-82.3c3.1 3.1 8.2 3.1 11.3 0l172.5-172.5 114.4 114.5c3.1 3.1 8.2 3.1 11.3 0l297-297.2c3.1-3.1 3.1-8.2 0-11.3l-36.8-36.8a8.03 8.03 0 00-11.3 0L531 565 416.6 450.5a8.03 8.03 0 00-11.3 0l-214.9 215a8.03 8.03 0 000 11.3l36.7 36.9z"}}]},name:"fund",theme:"outlined"};function Xe(g){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?Object(arguments[p]):{},k=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(v).filter(function(h){return Object.getOwnPropertyDescriptor(v,h).enumerable}))),k.forEach(function(h){ct(g,h,v[h])})}return g}function ct(g,p,v){return p in g?Object.defineProperty(g,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[p]=v,g}var De=function(p,v){var k=Xe({},p,v.attrs);return e(Se,Xe({},k,{icon:dt}),null)};De.displayName="FundOutlined";De.inheritAttrs=!1;var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"scan",theme:"outlined"};function He(g){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?Object(arguments[p]):{},k=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(v).filter(function(h){return Object.getOwnPropertyDescriptor(v,h).enumerable}))),k.forEach(function(h){vt(g,h,v[h])})}return g}function vt(g,p,v){return p in g?Object.defineProperty(g,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[p]=v,g}var ce=function(p,v){var k=He({},p,v.attrs);return e(Se,He({},k,{icon:pt}),null)};ce.displayName="ScanOutlined";ce.inheritAttrs=!1;const mt={class:"budget-reporter-page"},_t={class:"page-header"},ft={class:"header-content"},gt={class:"page-title"},yt={class:"user-role"},bt={class:"header-actions"},kt={class:"project-info"},xt={class:"info-item"},wt={class:"value"},ht={class:"info-item"},It={class:"value budget-amount"},Rt={class:"info-item"},Ct={class:"value used-amount"},At={class:"info-item"},Pt={class:"value remaining-amount"},Ot={class:"progress-section"},$t={key:1,class:"main-content"},St={class:"report-section"},jt={style:{"margin-bottom":"16px"}},Mt={key:0},zt={class:"analysis-section"},Dt={class:"smart-upload-container"},Ut={key:0,class:"upload-step"},Bt={class:"ant-upload-drag-icon"},Lt={style:{"margin-top":"16px","text-align":"right"}},Tt={key:1,class:"recognition-step"},Yt={class:"recognition-content"},Vt={class:"preview-container"},Ft={class:"image-preview"},Nt=["src"],qt={class:"recognition-progress"},Xt={class:"progress-text"},Ht={key:2,class:"confirm-step"},Gt={class:"image-preview-small"},Et=["src"],Jt={key:0,style:{"margin-left":"8px"}},Wt={key:0,class:"field-warning"},Zt={key:0,class:"ai-suggestion"},Kt={key:0,class:"field-warning"},Qt={key:0,class:"ai-info"},ea={style:{"margin-top":"24px","text-align":"right"}},ta={__name:"BudgetReporter",props:{userPermissions:{type:Object,default:()=>({})}},emits:["switch-role"],setup(g,{emit:p}){const v=g,k=p,h=G(()=>v.userPermissions.roles&&v.userPermissions.roles.includes("manager")),B=()=>{k("switch-role","manager")},K=G(()=>m.value.date&&m.value.categoryId&&m.value.amount&&m.value.description),E=y("budget"),O=y(""),b=y(!1),I=y(null),z=y(!1),D=y(0),q=y([]),X=y(!1),J=y(0),Q=y(""),W=y(""),m=y({date:null,categoryId:"",amount:null,description:"",suggestedCategory:"",merchantInfo:""}),T=y({success:!1,confidence:0}),se=y([{id:"P001",name:"XXXç§‘ç ”é¡¹ç›®",totalBudget:5e5,usedAmount:32e4,remainingAmount:18e4},{id:"P002",name:"YYYæŠ€æœ¯ç ”å‘é¡¹ç›®",totalBudget:8e5,usedAmount:48e4,remainingAmount:32e4}]),U=G(()=>se.value.find(r=>r.id===O.value)),ae=G(()=>U.value?Math.round(U.value.usedAmount/U.value.totalBudget*100):0),ye=G(()=>{const r=ae.value;return r>=95?"#ff4d4f":r>=90?"#fa8c16":r>=70?"#52c41a":"#1890ff"}),ee=y([{id:"equipment",name:"è®¾å¤‡è´¹"},{id:"material",name:"ææ–™è´¹"},{id:"personnel",name:"äººå‘˜è´¹"},{id:"other",name:"å…¶ä»–è´¹ç”¨"}]),be=y([{id:1,category:"è®¾å¤‡è´¹",budgetAmount:2e5,usedAmount:12e4,remainingAmount:8e4,executionRate:60},{id:2,category:"ææ–™è´¹",budgetAmount:15e4,usedAmount:1e5,remainingAmount:5e4,executionRate:67},{id:3,category:"äººå‘˜è´¹",budgetAmount:1e5,usedAmount:8e4,remainingAmount:2e4,executionRate:80},{id:4,category:"å…¶ä»–è´¹ç”¨",budgetAmount:5e4,usedAmount:2e4,remainingAmount:3e4,executionRate:40}]),L=y([{id:1,date:"2024-01-15",category:"è®¾å¤‡è´¹",amount:15e3,description:"è´­ä¹°å®žéªŒè®¾å¤‡XXX",status:"å¾…å®¡æ ¸",submitter:"å¼ ä¸‰"},{id:2,date:"2024-01-10",category:"ææ–™è´¹",amount:8e3,description:"é‡‡è´­å®žéªŒææ–™",status:"å·²å®¡æ ¸",submitter:"å¼ ä¸‰"}]),ke=y([...L.value,{id:3,date:"2024-01-05",category:"äººå‘˜è´¹",amount:12e3,description:"ç ”ç©¶äººå‘˜åŠ³åŠ¡è´¹",status:"å·²å®¡æ ¸",submitter:"æŽå››"}]),x=y({date:null,categoryId:"",amount:null,description:"",fileList:[]}),d=[{title:"é¢„ç®—ç§‘ç›®",dataIndex:"category",key:"category"},{title:"é¢„ç®—é‡‘é¢",dataIndex:"budgetAmount",key:"budgetAmount"},{title:"å·²ä½¿ç”¨",dataIndex:"usedAmount",key:"usedAmount"},{title:"å‰©ä½™",dataIndex:"remainingAmount",key:"remainingAmount"},{title:"æ‰§è¡ŒçŽ‡",dataIndex:"executionRate",key:"executionRate"}],o=[{title:"ä½¿ç”¨æ—¥æœŸ",dataIndex:"date",key:"date"},{title:"ç§‘ç›®",dataIndex:"category",key:"category"},{title:"é‡‘é¢",dataIndex:"amount",key:"amount"},{title:"ç”¨é€”è¯´æ˜Ž",dataIndex:"description",key:"description"},{title:"çŠ¶æ€",dataIndex:"status",key:"status"},{title:"æ“ä½œ",key:"actions"}],ne=[{title:"ä½¿ç”¨æ—¥æœŸ",dataIndex:"date",key:"date"},{title:"ç§‘ç›®",dataIndex:"category",key:"category"},{title:"é‡‘é¢",dataIndex:"amount",key:"amount"},{title:"ç”¨é€”è¯´æ˜Ž",dataIndex:"description",key:"description"},{title:"å¡«æŠ¥äºº",dataIndex:"submitter",key:"submitter"},{title:"çŠ¶æ€",dataIndex:"status",key:"status"}],j=r=>r.toLocaleString(),Y=r=>r>=95?"#ff4d4f":r>=90?"#fa8c16":r>=70?"#52c41a":"#1890ff",V=r=>({å¾…å®¡æ ¸:"orange",å·²å®¡æ ¸:"green",å·²é©³å›ž:"red"})[r]||"default",ve=r=>{console.log("é€‰æ‹©é¡¹ç›®:",r)},F=()=>{I.value=null,x.value={date:null,categoryId:"",amount:null,description:"",fileList:[]},b.value=!0},le=r=>{var a;I.value=r,x.value={date:ge(r.date),categoryId:((a=ee.value.find(w=>w.name===r.category))==null?void 0:a.id)||"",amount:r.amount,description:r.description,fileList:[]},b.value=!0},xe=r=>{const a=L.value.findIndex(w=>w.id===r.id);a>-1&&(L.value.splice(a,1),S.success("åˆ é™¤æˆåŠŸ"))},we=()=>{var a;if(!x.value.date||!x.value.categoryId||!x.value.amount||!x.value.description){S.error("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯");return}const r=((a=ee.value.find(w=>w.id===x.value.categoryId))==null?void 0:a.name)||"";if(I.value){const w=L.value.findIndex(te=>te.id===I.value.id);w>-1&&(L.value[w]={...L.value[w],date:x.value.date.format("YYYY-MM-DD"),category:r,amount:x.value.amount,description:x.value.description}),S.success("ä¿®æ”¹æˆåŠŸ")}else{const w={id:Date.now(),date:x.value.date.format("YYYY-MM-DD"),category:r,amount:x.value.amount,description:x.value.description,status:"å¾…å®¡æ ¸",submitter:"å¼ ä¸‰"};L.value.unshift(w),S.success("æäº¤æˆåŠŸï¼Œç­‰å¾…å®¡æ ¸")}b.value=!1},ue=()=>{b.value=!1},ie=r=>["application/pdf","image/jpeg","image/png"].includes(r.type)?(r.size/1024/1024<5||S.error("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB"),!1):(S.error("åªèƒ½ä¸Šä¼ PDFã€JPGã€PNGæ ¼å¼çš„æ–‡ä»¶"),!1),re=()=>{z.value=!0,D.value=0,oe()},he=()=>{z.value=!1,oe()},oe=()=>{D.value=0,q.value=[],X.value=!1,J.value=0,Q.value="",W.value="",m.value={date:null,categoryId:"",amount:null,description:"",suggestedCategory:"",merchantInfo:""},T.value={success:!1,confidence:0}},Z=r=>r.type.startsWith("image/")?(r.size/1024/1024<10||S.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB"),!1):(S.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ ¼å¼çš„æ–‡ä»¶"),!1),Ie=r=>{if(r.file.status==="done"||r.file.originFileObj){const a=new FileReader;a.onload=w=>{W.value=w.target.result},a.readAsDataURL(r.file.originFileObj||r.file)}},Re=async()=>{if(q.value.length===0){S.error("è¯·å…ˆä¸Šä¼ å‡­è¯å›¾ç‰‡");return}X.value=!0,D.value=1,J.value=0;const r=[{progress:20,text:"æ­£åœ¨é¢„å¤„ç†å›¾ç‰‡..."},{progress:40,text:"æ­£åœ¨è¯†åˆ«æ–‡å­—ä¿¡æ¯..."},{progress:60,text:"æ­£åœ¨æå–å…³é”®æ•°æ®..."},{progress:80,text:"æ­£åœ¨æ™ºèƒ½åˆ†æžå†…å®¹..."},{progress:100,text:"è¯†åˆ«å®Œæˆï¼"}];for(let a of r)await new Promise(w=>setTimeout(w,800)),J.value=a.progress,Q.value=a.text;await _(),X.value=!1,D.value=2},_=async()=>{const r=[{success:!0,confidence:92,date:ge("2024-01-15"),amount:2500,description:"è´­ä¹°å®žéªŒè®¾å¤‡ - æ•°å­—ä¸‡ç”¨è¡¨",suggestedCategory:"è®¾å¤‡è´¹",categoryId:"equipment",merchantInfo:"åŒ—äº¬ç§‘æŠ€å™¨ææœ‰é™å…¬å¸"},{success:!0,confidence:88,date:ge("2024-01-12"),amount:850,description:"é‡‡è´­å®žéªŒææ–™ - åŒ–å­¦è¯•å‰‚",suggestedCategory:"ææ–™è´¹",categoryId:"material",merchantInfo:"ä¸Šæµ·åŒ–å·¥ææ–™å•†åŸŽ"},{success:!0,confidence:95,date:ge("2024-01-10"),amount:1200,description:"ç ”ç©¶äººå‘˜äº¤é€šè´¹æŠ¥é”€",suggestedCategory:"å…¶ä»–è´¹ç”¨",categoryId:"other",merchantInfo:"æ»´æ»´å‡ºè¡Œ"}],a=r[Math.floor(Math.random()*r.length)];T.value={success:a.success,confidence:a.confidence},m.value={date:a.date,categoryId:a.categoryId,amount:a.amount,description:a.description,suggestedCategory:a.suggestedCategory,merchantInfo:a.merchantInfo},S.success(`è¯†åˆ«æˆåŠŸï¼ç½®ä¿¡åº¦: ${a.confidence}%`)},C=()=>{oe(),z.value=!0},me=()=>{var w;if(!K.value){S.error("è¯·å®Œå–„å¿…å¡«ä¿¡æ¯");return}const r=((w=ee.value.find(te=>te.id===m.value.categoryId))==null?void 0:w.name)||"",a={id:Date.now(),date:m.value.date.format("YYYY-MM-DD"),category:r,amount:m.value.amount,description:m.value.description,status:"å¾…å®¡æ ¸",submitter:"å¼ ä¸‰",isSmartFilled:!0};L.value.unshift(a),z.value=!1,S.success("æ™ºèƒ½å¡«æŠ¥æˆåŠŸï¼è®°å½•å·²æäº¤å®¡æ ¸"),oe()};return Me(()=>{O.value="P001"}),(r,a)=>{const w=i("a-tag"),te=i("a-select-option"),Ce=i("a-select"),H=i("a-button"),Ae=i("a-progress"),Pe=i("a-card"),Oe=i("a-table"),_e=i("a-tab-pane"),Ue=i("a-space"),fe=i("a-col"),Be=i("a-row"),Ee=i("a-tabs"),$e=i("a-step"),Je=i("a-steps"),Le=i("a-alert"),We=i("a-upload-dragger"),Ze=i("a-spin"),N=i("a-form-item"),Te=i("a-date-picker"),Ye=i("a-input-number"),Ve=i("a-textarea"),Fe=i("a-form"),Ne=i("a-modal"),Ke=i("a-upload");return u(),f("div",mt,[n("div",_t,[n("div",ft,[n("h1",gt,[e(P(Ge)),a[14]||(a[14]=s(" ç»è´¹æ‰§è¡Œè¿›åº¦ - å¡«æŠ¥é¡µé¢ ",-1))]),n("div",yt,[e(w,{color:"blue"},{default:t(()=>[e(P(ze)),a[15]||(a[15]=s(" æˆ‘çš„æƒé™ï¼šå¡«æŠ¥å‘˜ ",-1))]),_:1,__:[15]})])]),n("div",bt,[e(Ce,{value:O.value,"onUpdate:value":a[0]||(a[0]=l=>O.value=l),placeholder:"é€‰æ‹©é¡¹ç›®",style:{width:"280px","margin-right":"12px"},onChange:ve},{default:t(()=>[(u(!0),f(M,null,de(se.value,l=>(u(),$(te,{key:l.id,value:l.id},{default:t(()=>[s(c(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),h.value?(u(),$(H,{key:0,type:"default",onClick:B,style:{"border-color":"#fa8c16",color:"#fa8c16"}},{default:t(()=>[e(P(pe)),a[16]||(a[16]=s(" åˆ‡æ¢åˆ°ç®¡ç†è§†å›¾ ",-1))]),_:1,__:[16]})):R("",!0)])]),U.value?(u(),$(Pe,{key:0,class:"project-info-card"},{default:t(()=>[n("div",kt,[n("div",xt,[a[17]||(a[17]=n("span",{class:"label"},"é¡¹ç›®åç§°ï¼š",-1)),n("span",wt,c(U.value.name),1)]),n("div",ht,[a[18]||(a[18]=n("span",{class:"label"},"é¢„ç®—æ€»é¢ï¼š",-1)),n("span",It,"Â¥"+c(j(U.value.totalBudget)),1)]),n("div",Rt,[a[19]||(a[19]=n("span",{class:"label"},"å·²ä½¿ç”¨ï¼š",-1)),n("span",Ct,"Â¥"+c(j(U.value.usedAmount))+" ("+c(ae.value)+"%)",1)]),n("div",At,[a[20]||(a[20]=n("span",{class:"label"},"å‰©ä½™ï¼š",-1)),n("span",Pt,"Â¥"+c(j(U.value.remainingAmount))+" ("+c(100-ae.value)+"%)",1)])]),n("div",Ot,[e(Ae,{percent:ae.value,"stroke-color":ye.value,"stroke-width":8,style:{"margin-top":"16px"}},null,8,["percent","stroke-color"])])]),_:1})):R("",!0),U.value?(u(),f("div",$t,[e(Ee,{activeKey:E.value,"onUpdate:activeKey":a[1]||(a[1]=l=>E.value=l),type:"card"},{default:t(()=>[e(_e,{key:"budget",tab:"é¢„ç®—æ˜Žç»†"},{default:t(()=>[e(Oe,{columns:d,"data-source":be.value,pagination:!1,bordered:""},{bodyCell:t(({column:l,record:A})=>[l.key==="executionRate"?(u(),$(Ae,{key:0,percent:A.executionRate,size:"small","stroke-color":Y(A.executionRate)},null,8,["percent","stroke-color"])):l.key==="budgetAmount"?(u(),f(M,{key:1},[s(" Â¥"+c(j(A.budgetAmount)),1)],64)):l.key==="usedAmount"?(u(),f(M,{key:2},[s(" Â¥"+c(j(A.usedAmount)),1)],64)):l.key==="remainingAmount"?(u(),f(M,{key:3},[s(" Â¥"+c(j(A.remainingAmount)),1)],64)):R("",!0)]),_:1},8,["data-source"])]),_:1}),e(_e,{key:"report",tab:"ç»è´¹å¡«æŠ¥"},{default:t(()=>[n("div",St,[n("div",jt,[e(Ue,null,{default:t(()=>[e(H,{type:"primary",onClick:F},{default:t(()=>[e(P(et)),a[21]||(a[21]=s(" æ‰‹åŠ¨å¡«æŠ¥ ",-1))]),_:1,__:[21]}),e(H,{type:"default",onClick:re,style:{"border-color":"#52c41a",color:"#52c41a"}},{default:t(()=>[e(P(ce)),a[22]||(a[22]=s(" æ™ºèƒ½å‡­è¯å¡«æŠ¥ ",-1))]),_:1,__:[22]})]),_:1})]),e(Oe,{columns:o,"data-source":L.value,pagination:{pageSize:10},bordered:""},{bodyCell:t(({column:l,record:A})=>[l.key==="description"?(u(),f("div",Mt,[s(c(A.description)+" ",1),A.isSmartFilled?(u(),$(w,{key:0,color:"green",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[e(P(ce)),a[23]||(a[23]=s(" æ™ºèƒ½å¡«æŠ¥ ",-1))]),_:1,__:[23]})):R("",!0)])):l.key==="amount"?(u(),f(M,{key:1},[s(" Â¥"+c(j(A.amount)),1)],64)):l.key==="status"?(u(),$(w,{key:2,color:V(A.status)},{default:t(()=>[s(c(A.status),1)]),_:2},1032,["color"])):l.key==="actions"?(u(),f(M,{key:3},[e(H,{type:"link",size:"small",onClick:Qe=>le(A),disabled:A.status==="å·²å®¡æ ¸"},{default:t(()=>a[24]||(a[24]=[s(" ç¼–è¾‘ ",-1)])),_:2,__:[24]},1032,["onClick","disabled"]),e(H,{type:"link",size:"small",danger:"",onClick:Qe=>xe(A),disabled:A.status==="å·²å®¡æ ¸"},{default:t(()=>a[25]||(a[25]=[s(" åˆ é™¤ ",-1)])),_:2,__:[25]},1032,["onClick","disabled"])],64)):R("",!0)]),_:1},8,["data-source"])])]),_:1}),e(_e,{key:"records",tab:"ä½¿ç”¨è®°å½•"},{default:t(()=>[e(Oe,{columns:ne,"data-source":ke.value,pagination:{pageSize:15},bordered:""},{bodyCell:t(({column:l,record:A})=>[l.key==="amount"?(u(),f(M,{key:0},[s(" Â¥"+c(j(A.amount)),1)],64)):l.key==="status"?(u(),$(w,{key:1,color:V(A.status)},{default:t(()=>[s(c(A.status),1)]),_:2},1032,["color"])):R("",!0)]),_:1},8,["data-source"])]),_:1}),e(_e,{key:"analysis",tab:"æ‰§è¡Œåˆ†æž"},{default:t(()=>[n("div",zt,[e(Be,{gutter:16},{default:t(()=>[e(fe,{span:12},{default:t(()=>[e(Pe,{title:"æœˆåº¦ä½¿ç”¨è¶‹åŠ¿",size:"small"},{default:t(()=>a[26]||(a[26]=[n("div",{class:"chart-container"}," å›¾è¡¨åŠ è½½ä¸­... ",-1)])),_:1,__:[26]})]),_:1}),e(fe,{span:12},{default:t(()=>[e(Pe,{title:"ç§‘ç›®åˆ†å¸ƒ",size:"small"},{default:t(()=>a[27]||(a[27]=[n("div",{class:"chart-container"}," å›¾è¡¨åŠ è½½ä¸­... ",-1)])),_:1,__:[27]})]),_:1})]),_:1})])]),_:1})]),_:1},8,["activeKey"])])):R("",!0),e(Ne,{open:z.value,"onUpdate:open":a[7]||(a[7]=l=>z.value=l),title:"æ™ºèƒ½å‡­è¯å¡«æŠ¥",width:"700px",footer:null,onCancel:he},{default:t(()=>[n("div",Dt,[e(Je,{current:D.value,style:{"margin-bottom":"24px"}},{default:t(()=>[e($e,{title:"ä¸Šä¼ å‡­è¯"}),e($e,{title:"æ™ºèƒ½è¯†åˆ«"}),e($e,{title:"ç¡®è®¤ä¿¡æ¯"})]),_:1},8,["current"]),D.value===0?(u(),f("div",Ut,[e(Le,{message:"å‡­è¯è¦æ±‚",type:"info","show-icon":"",style:{"margin-bottom":"16px"}},{description:t(()=>a[28]||(a[28]=[n("div",{class:"voucher-requirements"},[n("p",null,[n("strong",null,"è¯·ç¡®ä¿å‡­è¯å›¾ç‰‡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š")]),n("ul",null,[n("li",null,[s("ðŸ“… "),n("strong",null,"æ¶ˆè´¹æ—¥æœŸ"),s("ï¼šæ˜Žç¡®çš„äº¤æ˜“æ—¶é—´")]),n("li",null,[s("ðŸ’° "),n("strong",null,"æ¶ˆè´¹é‡‘é¢"),s("ï¼šæ¸…æ™°çš„æ•°å­—é‡‘é¢")]),n("li",null,[s("ðŸª "),n("strong",null,"å•†å®¶ä¿¡æ¯"),s("ï¼šå•†æˆ·åç§°æˆ–ç»è¥èŒƒå›´")]),n("li",null,[s("ðŸ“ "),n("strong",null,"æ¶ˆè´¹é¡¹ç›®"),s("ï¼šå…·ä½“çš„å•†å“æˆ–æœåŠ¡åç§°")]),n("li",null,[s("ðŸ§¾ "),n("strong",null,"å‘ç¥¨ç±»åž‹"),s("ï¼šå¢žå€¼ç¨Žå‘ç¥¨ã€æ”¶æ®ç­‰")])]),n("p",{class:"tip"},[s("ðŸ’¡ "),n("em",null,"æ”¯æŒå‘ç¥¨ã€æ”¶æ®ã€è´­ç‰©å°ç¥¨ç­‰å„ç±»æ¶ˆè´¹å‡­è¯")])],-1)])),_:1}),e(We,{"file-list":q.value,"onUpdate:fileList":a[2]||(a[2]=l=>q.value=l),"before-upload":Z,accept:"image/*","max-count":1,onChange:Ie},{default:t(()=>[n("p",Bt,[e(P(nt))]),a[29]||(a[29]=n("p",{class:"ant-upload-text"},"ç‚¹å‡»æˆ–æ‹–æ‹½å‡­è¯å›¾ç‰‡åˆ°æ­¤åŒºåŸŸä¸Šä¼ ",-1)),a[30]||(a[30]=n("p",{class:"ant-upload-hint"}," æ”¯æŒ JPGã€PNGã€JPEG æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 10MB ",-1))]),_:1,__:[29,30]},8,["file-list"]),n("div",Lt,[e(H,{type:"primary",onClick:Re,disabled:q.value.length===0,loading:X.value},{default:t(()=>[e(P(ce)),a[31]||(a[31]=s(" å¼€å§‹è¯†åˆ« ",-1))]),_:1,__:[31]},8,["disabled","loading"])])])):R("",!0),D.value===1?(u(),f("div",Tt,[n("div",Yt,[e(Ze,{spinning:X.value,tip:"æ­£åœ¨æ™ºèƒ½è¯†åˆ«å‡­è¯ä¿¡æ¯..."},{default:t(()=>[n("div",Vt,[n("div",Ft,[W.value?(u(),f("img",{key:0,src:W.value,alt:"å‡­è¯é¢„è§ˆ"},null,8,Nt)):R("",!0)]),n("div",qt,[e(Ae,{percent:J.value,"stroke-color":{"0%":"#108ee9","100%":"#87d068"}},null,8,["percent"]),n("p",Xt,c(Q.value),1)])])]),_:1},8,["spinning"])])])):R("",!0),D.value===2?(u(),f("div",Ht,[e(Le,{message:"è¯·ä»”ç»†æ ¸å¯¹è¯†åˆ«ç»“æžœ",type:"warning","show-icon":"",style:{"margin-bottom":"16px"},description:"ç³»ç»Ÿå·²è‡ªåŠ¨è¯†åˆ«å‡­è¯ä¿¡æ¯ï¼Œè¯·æ ¸å¯¹å‡†ç¡®æ€§å¹¶è¿›è¡Œå¿…è¦çš„ä¿®æ­£ã€‚"}),e(Be,{gutter:16},{default:t(()=>[e(fe,{span:10},{default:t(()=>[n("div",Gt,[W.value?(u(),f("img",{key:0,src:W.value,alt:"å‡­è¯é¢„è§ˆ"},null,8,Et)):R("",!0)])]),_:1}),e(fe,{span:14},{default:t(()=>[e(Fe,{model:m.value,"label-col":{span:6},"wrapper-col":{span:18}},{default:t(()=>[e(N,{label:"è¯†åˆ«çŠ¶æ€"},{default:t(()=>[e(w,{color:T.value.success?"green":"red"},{default:t(()=>[s(c(T.value.success?"è¯†åˆ«æˆåŠŸ":"è¯†åˆ«å¤±è´¥"),1)]),_:1},8,["color"]),T.value.confidence?(u(),f("span",Jt," ç½®ä¿¡åº¦: "+c(T.value.confidence)+"% ",1)):R("",!0)]),_:1}),e(N,{label:"æ¶ˆè´¹æ—¥æœŸ",required:""},{default:t(()=>[e(Te,{value:m.value.date,"onUpdate:value":a[3]||(a[3]=l=>m.value.date=l),style:{width:"100%"},status:m.value.date?"":"warning"},null,8,["value","status"]),m.value.date?R("",!0):(u(),f("div",Wt," âš ï¸ æœªèƒ½è¯†åˆ«åˆ°æ—¥æœŸï¼Œè¯·æ‰‹åŠ¨é€‰æ‹© "))]),_:1}),e(N,{label:"é¢„ç®—ç§‘ç›®",required:""},{default:t(()=>[e(Ce,{value:m.value.categoryId,"onUpdate:value":a[4]||(a[4]=l=>m.value.categoryId=l),placeholder:"è¯·é€‰æ‹©æˆ–ç¡®è®¤ç§‘ç›®",status:m.value.categoryId?"":"warning"},{default:t(()=>[(u(!0),f(M,null,de(ee.value,l=>(u(),$(te,{key:l.id,value:l.id},{default:t(()=>[s(c(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","status"]),m.value.suggestedCategory?(u(),f("div",Zt," ðŸ’¡ AIå»ºè®®: "+c(m.value.suggestedCategory),1)):R("",!0)]),_:1}),e(N,{label:"æ¶ˆè´¹é‡‘é¢",required:""},{default:t(()=>[e(Ye,{value:m.value.amount,"onUpdate:value":a[5]||(a[5]=l=>m.value.amount=l),min:0,precision:2,style:{width:"100%"},placeholder:"è¯·ç¡®è®¤é‡‘é¢",status:m.value.amount?"":"warning"},null,8,["value","status"]),m.value.amount?R("",!0):(u(),f("div",Kt," âš ï¸ æœªèƒ½è¯†åˆ«åˆ°é‡‘é¢ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ "))]),_:1}),e(N,{label:"ç”¨é€”è¯´æ˜Ž",required:""},{default:t(()=>[e(Ve,{value:m.value.description,"onUpdate:value":a[6]||(a[6]=l=>m.value.description=l),rows:3,placeholder:"è¯·ç¡®è®¤æˆ–è¡¥å……ç”¨é€”è¯´æ˜Ž",status:m.value.description?"":"warning"},null,8,["value","status"]),m.value.merchantInfo?(u(),f("div",Qt," ðŸª è¯†åˆ«å•†å®¶: "+c(m.value.merchantInfo),1)):R("",!0)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),n("div",ea,[e(Ue,null,{default:t(()=>[e(H,{onClick:C},{default:t(()=>a[32]||(a[32]=[s("é‡æ–°ä¸Šä¼ ",-1)])),_:1,__:[32]}),e(H,{type:"primary",onClick:me,disabled:!K.value},{default:t(()=>a[33]||(a[33]=[s(" ç¡®è®¤æäº¤ ",-1)])),_:1,__:[33]},8,["disabled"])]),_:1})])])):R("",!0)])]),_:1},8,["open"]),e(Ne,{open:b.value,"onUpdate:open":a[13]||(a[13]=l=>b.value=l),title:I.value?"ç¼–è¾‘ç»è´¹ä½¿ç”¨è®°å½•":"æ‰‹åŠ¨å¡«æŠ¥ç»è´¹è®°å½•",width:"600px",onOk:we,onCancel:ue},{default:t(()=>[e(Fe,{model:x.value,"label-col":{span:6},"wrapper-col":{span:18}},{default:t(()=>[e(N,{label:"ä½¿ç”¨æ—¥æœŸ",required:""},{default:t(()=>[e(Te,{value:x.value.date,"onUpdate:value":a[8]||(a[8]=l=>x.value.date=l),style:{width:"100%"}},null,8,["value"])]),_:1}),e(N,{label:"é¢„ç®—ç§‘ç›®",required:""},{default:t(()=>[e(Ce,{value:x.value.categoryId,"onUpdate:value":a[9]||(a[9]=l=>x.value.categoryId=l),placeholder:"è¯·é€‰æ‹©ç§‘ç›®"},{default:t(()=>[(u(!0),f(M,null,de(ee.value,l=>(u(),$(te,{key:l.id,value:l.id},{default:t(()=>[s(c(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(N,{label:"ä½¿ç”¨é‡‘é¢",required:""},{default:t(()=>[e(Ye,{value:x.value.amount,"onUpdate:value":a[10]||(a[10]=l=>x.value.amount=l),min:0,precision:2,style:{width:"100%"},placeholder:"è¯·è¾“å…¥é‡‘é¢"},null,8,["value"])]),_:1}),e(N,{label:"ç”¨é€”è¯´æ˜Ž",required:""},{default:t(()=>[e(Ve,{value:x.value.description,"onUpdate:value":a[11]||(a[11]=l=>x.value.description=l),rows:3,placeholder:"è¯·è¯¦ç»†è¯´æ˜Žç»è´¹ä½¿ç”¨ç”¨é€”"},null,8,["value"])]),_:1}),e(N,{label:"å‘ç¥¨é™„ä»¶"},{default:t(()=>[e(Ke,{"file-list":x.value.fileList,"onUpdate:fileList":a[12]||(a[12]=l=>x.value.fileList=l),"before-upload":ie,accept:".pdf,.jpg,.jpeg,.png"},{default:t(()=>[e(H,null,{default:t(()=>[e(P(ot)),a[34]||(a[34]=s(" é€‰æ‹©æ–‡ä»¶ ",-1))]),_:1,__:[34]})]),_:1},8,["file-list"]),a[35]||(a[35]=n("div",{style:{"margin-top":"8px",color:"#666","font-size":"12px"}}," æ”¯æŒæ ¼å¼ï¼šPDFã€JPGã€PNGï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡5MB ",-1))]),_:1,__:[35]})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}},aa=je(ta,[["__scopeId","data-v-57ef4fc4"]]),na={class:"budget-manager-page"},oa={class:"page-header"},sa={class:"header-content"},la={class:"page-title"},ua={class:"user-role"},ia={class:"header-actions"},ra={class:"stats-cards"},da={class:"stat-content"},ca={class:"stat-icon total"},pa={class:"stat-info"},va={class:"stat-value"},ma={class:"stat-content"},_a={class:"stat-icon executed"},fa={class:"stat-info"},ga={class:"stat-value"},ya={class:"stat-content"},ba={class:"stat-icon rate"},ka={class:"stat-info"},xa={class:"stat-value"},wa={class:"stat-content"},ha={class:"stat-icon warning"},Ia={class:"stat-info"},Ra={class:"stat-value"},Ca={class:"filter-toolbar"},Aa={class:"main-content"},Pa={class:"analysis-content"},Oa={class:"ranking-list"},$a={class:"project-info"},Sa={class:"project-name"},ja={class:"project-rate"},Ma={class:"progress-bar"},za={key:0},Da={__name:"BudgetManager",props:{userPermissions:{type:Object,default:()=>({})}},emits:["switch-role"],setup(g,{emit:p}){const v=g,k=p,h=G(()=>v.userPermissions.roles&&v.userPermissions.roles.includes("reporter")),B=()=>{k("switch-role","reporter")},K=y("projects"),E=y(!1),O=y(null),b=y({project:"",year:"2024",status:"",keyword:""}),I=y({totalBudget:5e7,executedAmount:32e6,executionRate:64,warningProjects:12}),z=y([{id:"P001",name:"XXXç§‘ç ”é¡¹ç›®",manager:"å¼ æ•™æŽˆ",totalBudget:5e5,executedAmount:32e4,executionRate:64,status:"normal",details:[{category:"è®¾å¤‡è´¹",budgetAmount:2e5,usedAmount:12e4,executionRate:60},{category:"ææ–™è´¹",budgetAmount:15e4,usedAmount:1e5,executionRate:67},{category:"äººå‘˜è´¹",budgetAmount:1e5,usedAmount:8e4,executionRate:80},{category:"å…¶ä»–è´¹ç”¨",budgetAmount:5e4,usedAmount:2e4,executionRate:40}]},{id:"P002",name:"YYYæŠ€æœ¯ç ”å‘",manager:"æŽåšå£«",totalBudget:8e5,executedAmount:72e4,executionRate:90,status:"warning"},{id:"P003",name:"ZZZåˆ›æ–°é¡¹ç›®",manager:"çŽ‹ä¸»ä»»",totalBudget:3e5,executedAmount:15e4,executionRate:50,status:"normal"}]),D=G(()=>{let d=z.value;return b.value.project&&(d=d.filter(o=>o.id===b.value.project)),b.value.status&&(d=d.filter(o=>o.status===b.value.status)),b.value.keyword&&(d=d.filter(o=>o.name.includes(b.value.keyword))),d}),q=G(()=>z.value.filter(d=>d.executionRate>=85).map(d=>({...d,warningType:d.executionRate>=95?"è¶…æ”¯é¢„è­¦":"æŽ¥è¿‘é¢„ç®—"}))),X=G(()=>[...z.value].sort((d,o)=>o.executionRate-d.executionRate).map(d=>({...d,rateDesc:d.executionRate>=95?"è¶…é¢„æœŸ":d.executionRate>=80?"è‰¯å¥½":"æ»žåŽ"}))),J=[{title:"é¡¹ç›®åç§°",dataIndex:"name",key:"name"},{title:"é¡¹ç›®è´Ÿè´£äºº",dataIndex:"manager",key:"manager"},{title:"é¢„ç®—æ€»é¢",dataIndex:"totalBudget",key:"totalBudget"},{title:"å·²æ‰§è¡Œ",dataIndex:"executedAmount",key:"executedAmount"},{title:"æ‰§è¡ŒçŽ‡",dataIndex:"executionRate",key:"executionRate"},{title:"çŠ¶æ€",dataIndex:"status",key:"status"},{title:"æ“ä½œ",key:"actions"}],Q=[{title:"é¡¹ç›®åç§°",dataIndex:"name",key:"name"},{title:"æ‰§è¡ŒçŽ‡",dataIndex:"executionRate",key:"executionRate"},{title:"é¢„è­¦ç±»åž‹",dataIndex:"warningType",key:"warningType"},{title:"é¡¹ç›®è´Ÿè´£äºº",dataIndex:"manager",key:"manager"},{title:"æ“ä½œ",key:"actions"}],W=[{title:"ç§‘ç›®",dataIndex:"category",key:"category"},{title:"é¢„ç®—é‡‘é¢",dataIndex:"budgetAmount",key:"budgetAmount"},{title:"å·²ä½¿ç”¨",dataIndex:"usedAmount",key:"usedAmount"},{title:"æ‰§è¡ŒçŽ‡",dataIndex:"executionRate",key:"executionRate"}],m=d=>d.toLocaleString(),T=d=>d>=95?"#ff4d4f":d>=90?"#fa8c16":d>=70?"#52c41a":"#1890ff",se=d=>({normal:"green",warning:"orange",danger:"red"})[d]||"default",U=d=>({normal:"æ­£å¸¸",warning:"é¢„è­¦",danger:"è¶…æ ‡"})[d]||"æœªçŸ¥",ae=d=>d==="è¶…æ”¯é¢„è­¦"?"red":"orange",ye=d=>d===0?"rank-first":d===1?"rank-second":d===2?"rank-third":"",ee=()=>{console.log("æœç´¢:",b.value.keyword)},be=d=>{O.value=d,E.value=!0},L=d=>{S.info(`æŸ¥çœ‹ ${d.name} çš„è¯¦ç»†åˆ†æž`)},ke=d=>{S.info(`å¤„ç† ${d.name} çš„é¢„è­¦`)},x=()=>{S.success("æŠ¥è¡¨å¯¼å‡ºæˆåŠŸ")};return Me(()=>{console.log("ç®¡ç†é¡µé¢å·²åŠ è½½")}),(d,o)=>{const ne=i("a-tag"),j=i("a-button"),Y=i("a-card"),V=i("a-col"),ve=i("a-row"),F=i("a-select-option"),le=i("a-select"),xe=i("a-input-search"),we=i("a-space"),ue=i("a-progress"),ie=i("a-table"),re=i("a-tab-pane"),he=i("a-alert"),oe=i("a-tabs"),Z=i("a-descriptions-item"),Ie=i("a-descriptions"),Re=i("a-modal");return u(),f("div",na,[n("div",oa,[n("div",sa,[n("h1",la,[e(P(st)),o[6]||(o[6]=s(" ç»è´¹æ‰§è¡Œè¿›åº¦ - ç®¡ç†é¡µé¢ ",-1))]),n("div",ua,[e(ne,{color:"red"},{default:t(()=>[e(P(pe)),o[7]||(o[7]=s(" æˆ‘çš„æƒé™ï¼šç®¡ç†å‘˜ ",-1))]),_:1,__:[7]})])]),n("div",ia,[h.value?(u(),$(j,{key:0,type:"default",onClick:B,style:{"border-color":"#52c41a",color:"#52c41a","margin-right":"12px"}},{default:t(()=>[e(P(ze)),o[8]||(o[8]=s(" åˆ‡æ¢åˆ°å¡«æŠ¥è§†å›¾ ",-1))]),_:1,__:[8]})):R("",!0),e(j,{type:"primary",onClick:x},{default:t(()=>[e(P(tt)),o[9]||(o[9]=s(" å¯¼å‡ºæŠ¥è¡¨ ",-1))]),_:1,__:[9]})])]),n("div",ra,[e(ve,{gutter:16},{default:t(()=>[e(V,{span:6},{default:t(()=>[e(Y,{class:"stat-card"},{default:t(()=>[n("div",da,[n("div",ca,[e(P(De))]),n("div",pa,[n("div",va,"Â¥"+c(m(I.value.totalBudget)),1),o[10]||(o[10]=n("div",{class:"stat-label"},"æ€»é¢„ç®—",-1))])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(Y,{class:"stat-card"},{default:t(()=>[n("div",ma,[n("div",_a,[e(P(Ge))]),n("div",fa,[n("div",ga,"Â¥"+c(m(I.value.executedAmount)),1),o[11]||(o[11]=n("div",{class:"stat-label"},"å·²æ‰§è¡Œ",-1))])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(Y,{class:"stat-card"},{default:t(()=>[n("div",ya,[n("div",ba,[e(P(lt))]),n("div",ka,[n("div",xa,c(I.value.executionRate)+"%",1),o[12]||(o[12]=n("div",{class:"stat-label"},"æ‰§è¡ŒçŽ‡",-1))])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(Y,{class:"stat-card"},{default:t(()=>[n("div",wa,[n("div",ha,[e(P(ut))]),n("div",Ia,[n("div",Ra,c(I.value.warningProjects),1),o[13]||(o[13]=n("div",{class:"stat-label"},"é¢„è­¦é¡¹ç›®",-1))])])]),_:1})]),_:1})]),_:1})]),n("div",Ca,[e(we,null,{default:t(()=>[e(le,{value:b.value.project,"onUpdate:value":o[0]||(o[0]=_=>b.value.project=_),placeholder:"å…¨éƒ¨é¡¹ç›®",style:{width:"150px"}},{default:t(()=>[e(F,{value:""},{default:t(()=>o[14]||(o[14]=[s("å…¨éƒ¨é¡¹ç›®",-1)])),_:1,__:[14]}),(u(!0),f(M,null,de(z.value,_=>(u(),$(F,{key:_.id,value:_.id},{default:t(()=>[s(c(_.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),e(le,{value:b.value.year,"onUpdate:value":o[1]||(o[1]=_=>b.value.year=_),placeholder:"å¹´ä»½",style:{width:"120px"}},{default:t(()=>[e(F,{value:"2024"},{default:t(()=>o[15]||(o[15]=[s("2024å¹´",-1)])),_:1,__:[15]}),e(F,{value:"2023"},{default:t(()=>o[16]||(o[16]=[s("2023å¹´",-1)])),_:1,__:[16]})]),_:1},8,["value"]),e(le,{value:b.value.status,"onUpdate:value":o[2]||(o[2]=_=>b.value.status=_),placeholder:"çŠ¶æ€",style:{width:"120px"}},{default:t(()=>[e(F,{value:""},{default:t(()=>o[17]||(o[17]=[s("å…¨éƒ¨çŠ¶æ€",-1)])),_:1,__:[17]}),e(F,{value:"normal"},{default:t(()=>o[18]||(o[18]=[s("æ­£å¸¸",-1)])),_:1,__:[18]}),e(F,{value:"warning"},{default:t(()=>o[19]||(o[19]=[s("é¢„è­¦",-1)])),_:1,__:[19]}),e(F,{value:"danger"},{default:t(()=>o[20]||(o[20]=[s("è¶…æ ‡",-1)])),_:1,__:[20]})]),_:1},8,["value"]),e(xe,{value:b.value.keyword,"onUpdate:value":o[3]||(o[3]=_=>b.value.keyword=_),placeholder:"æœç´¢é¡¹ç›®åç§°",style:{width:"200px"},onSearch:ee},null,8,["value"])]),_:1})]),n("div",Aa,[e(oe,{activeKey:K.value,"onUpdate:activeKey":o[4]||(o[4]=_=>K.value=_),type:"card"},{default:t(()=>[e(re,{key:"projects",tab:"é¡¹ç›®åˆ—è¡¨"},{default:t(()=>[e(ie,{columns:J,"data-source":D.value,pagination:{pageSize:10},bordered:""},{bodyCell:t(({column:_,record:C})=>[_.key==="totalBudget"?(u(),f(M,{key:0},[s(" Â¥"+c(m(C.totalBudget)),1)],64)):_.key==="executedAmount"?(u(),f(M,{key:1},[s(" Â¥"+c(m(C.executedAmount)),1)],64)):_.key==="executionRate"?(u(),$(ue,{key:2,percent:C.executionRate,size:"small","stroke-color":T(C.executionRate)},null,8,["percent","stroke-color"])):_.key==="status"?(u(),$(ne,{key:3,color:se(C.status)},{default:t(()=>[s(c(U(C.status)),1)]),_:2},1032,["color"])):_.key==="actions"?(u(),f(M,{key:4},[e(j,{type:"link",size:"small",onClick:me=>be(C)},{default:t(()=>o[21]||(o[21]=[s(" è¯¦æƒ… ",-1)])),_:2,__:[21]},1032,["onClick"]),e(j,{type:"link",size:"small",onClick:me=>L(C)},{default:t(()=>o[22]||(o[22]=[s(" åˆ†æž ",-1)])),_:2,__:[22]},1032,["onClick"])],64)):R("",!0)]),_:1},8,["data-source"])]),_:1}),e(re,{key:"analysis",tab:"ç»Ÿè®¡åˆ†æž"},{default:t(()=>[n("div",Pa,[e(ve,{gutter:16},{default:t(()=>[e(V,{span:8},{default:t(()=>[e(Y,{title:"æ‰§è¡Œè¶‹åŠ¿å›¾",size:"small"},{default:t(()=>o[23]||(o[23]=[n("div",{class:"chart-container"}," å›¾è¡¨åŠ è½½ä¸­... ",-1)])),_:1,__:[23]})]),_:1}),e(V,{span:8},{default:t(()=>[e(Y,{title:"ç§‘ç›®åˆ†å¸ƒé¥¼å›¾",size:"small"},{default:t(()=>o[24]||(o[24]=[n("div",{class:"chart-container"}," å›¾è¡¨åŠ è½½ä¸­... ",-1)])),_:1,__:[24]})]),_:1}),e(V,{span:8},{default:t(()=>[e(Y,{title:"æœˆåº¦å¯¹æ¯”æŸ±çŠ¶å›¾",size:"small"},{default:t(()=>o[25]||(o[25]=[n("div",{class:"chart-container"}," å›¾è¡¨åŠ è½½ä¸­... ",-1)])),_:1,__:[25]})]),_:1})]),_:1}),e(Y,{title:"æ‰§è¡Œæ•ˆçŽ‡æŽ’è¡Œæ¦œ",style:{"margin-top":"16px"}},{default:t(()=>[n("div",Oa,[(u(!0),f(M,null,de(X.value,(_,C)=>(u(),f("div",{key:_.id,class:"ranking-item"},[n("div",{class:at(["rank-number",ye(C)])},c(C+1),3),n("div",$a,[n("div",Sa,c(_.name),1),n("div",ja,c(_.executionRate)+"% ("+c(_.rateDesc)+")",1)]),n("div",Ma,[e(ue,{percent:_.executionRate,size:"small","stroke-color":T(_.executionRate),"show-info":!1},null,8,["percent","stroke-color"])])]))),128))])]),_:1})])]),_:1}),e(re,{key:"warning",tab:"é¢„è­¦ç›‘æŽ§"},{default:t(()=>[e(he,{message:"ç³»ç»Ÿæ£€æµ‹åˆ°ä»¥ä¸‹é¡¹ç›®å­˜åœ¨é¢„è­¦æƒ…å†µ",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),e(ie,{columns:Q,"data-source":q.value,pagination:!1,bordered:""},{bodyCell:t(({column:_,record:C})=>[_.key==="executionRate"?(u(),$(ue,{key:0,percent:C.executionRate,size:"small","stroke-color":T(C.executionRate)},null,8,["percent","stroke-color"])):_.key==="warningType"?(u(),$(ne,{key:1,color:ae(C.warningType)},{default:t(()=>[s(c(C.warningType),1)]),_:2},1032,["color"])):_.key==="actions"?(u(),$(j,{key:2,type:"link",size:"small",onClick:me=>ke(C)},{default:t(()=>o[26]||(o[26]=[s(" å¤„ç† ",-1)])),_:2,__:[26]},1032,["onClick"])):R("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["activeKey"])]),e(Re,{open:E.value,"onUpdate:open":o[5]||(o[5]=_=>E.value=_),title:"é¡¹ç›®æ‰§è¡Œè¯¦æƒ…",width:"800px",footer:null},{default:t(()=>[O.value?(u(),f("div",za,[e(Ie,{column:2,bordered:""},{default:t(()=>[e(Z,{label:"é¡¹ç›®åç§°"},{default:t(()=>[s(c(O.value.name),1)]),_:1}),e(Z,{label:"é¡¹ç›®è´Ÿè´£äºº"},{default:t(()=>[s(c(O.value.manager),1)]),_:1}),e(Z,{label:"é¢„ç®—æ€»é¢"},{default:t(()=>[s("Â¥"+c(m(O.value.totalBudget)),1)]),_:1}),e(Z,{label:"å·²æ‰§è¡Œé‡‘é¢"},{default:t(()=>[s("Â¥"+c(m(O.value.executedAmount)),1)]),_:1}),e(Z,{label:"æ‰§è¡ŒçŽ‡"},{default:t(()=>[s(c(O.value.executionRate)+"%",1)]),_:1}),e(Z,{label:"é¡¹ç›®çŠ¶æ€"},{default:t(()=>[e(ne,{color:se(O.value.status)},{default:t(()=>[s(c(U(O.value.status)),1)]),_:1},8,["color"])]),_:1})]),_:1}),o[27]||(o[27]=n("h4",{style:{"margin-top":"24px"}},"ç§‘ç›®æ‰§è¡Œæ˜Žç»†",-1)),e(ie,{columns:W,"data-source":O.value.details||[],pagination:!1,size:"small",bordered:""},null,8,["data-source"])])):R("",!0)]),_:1},8,["open"])])}}},Ua=je(Da,[["__scopeId","data-v-48d1bbf0"]]),Ba={class:"payment-container"},La={key:0,class:"loading-container"},Ta={key:1,class:"content-area"},Ya={style:{"margin-top":"16px","text-align":"center"}},Va={__name:"index",setup(g){const p=y(!0),v=y(!1),k=y(""),h=y(""),B=y({}),K=async()=>{await new Promise(b=>setTimeout(b,1e3)),B.value={roles:["reporter","manager"],defaultRole:"reporter"},p.value=!1,B.value.roles.length===1?h.value=B.value.roles[0]:B.value.roles.length>1?v.value=!0:h.value="no-permission"},E=()=>{h.value=k.value,v.value=!1},O=b=>{B.value.roles.includes(b)&&(h.value=b)};return Me(()=>{K()}),(b,I)=>{const z=i("a-spin"),D=i("a-radio-button"),q=i("a-radio-group"),X=i("a-button"),J=i("a-card");return u(),f("div",Ba,[I[6]||(I[6]=n("div",{class:"page-header"},[n("h1",{class:"page-title"},"ç»è´¹æ‰§è¡Œè¿›åº¦"),n("div",{class:"page-desc"},"é¡¹ç›®èµ„é‡‘ç®¡ç†ï¼ŒæŒ‰è§’è‰²åˆ’åˆ†å¡«æŠ¥ä¸Žå®¡æ ¸èŒè´£ï¼Œå®žæ—¶ç›‘æŽ§é¢„ç®—æ‰§è¡Œæƒ…å†µ")],-1)),p.value?(u(),f("div",La,[e(z,{size:"large"}),I[1]||(I[1]=n("p",null,"æ­£åœ¨è¯†åˆ«ç”¨æˆ·æƒé™...",-1))])):v.value?(u(),f("div",Ta,[e(J,{title:"ç»è´¹æ‰§è¡Œè¿›åº¦ - è§’è‰²é€‰æ‹©",class:"role-card"},{default:t(()=>[I[5]||(I[5]=n("p",null,"ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨æœ‰å¤šä¸ªè§’è‰²æƒé™ï¼Œè¯·é€‰æ‹©è¦ä½¿ç”¨çš„è§’è‰²ï¼š",-1)),e(q,{value:k.value,"onUpdate:value":I[0]||(I[0]=Q=>k.value=Q),style:{width:"100%"}},{default:t(()=>[e(D,{value:"reporter",style:{width:"50%","text-align":"center"}},{default:t(()=>[e(P(ze)),I[2]||(I[2]=s(" å¡«æŠ¥äººå‘˜ ",-1))]),_:1,__:[2]}),e(D,{value:"manager",style:{width:"50%","text-align":"center"}},{default:t(()=>[e(P(pe)),I[3]||(I[3]=s(" ç®¡ç†è§’è‰² ",-1))]),_:1,__:[3]})]),_:1},8,["value"]),n("div",Ya,[e(X,{type:"primary",onClick:E,disabled:!k.value},{default:t(()=>I[4]||(I[4]=[s(" ç¡®è®¤è¿›å…¥ ",-1)])),_:1,__:[4]},8,["disabled"])])]),_:1,__:[5]})])):h.value==="reporter"?(u(),$(aa,{key:2,"user-permissions":B.value,onSwitchRole:O},null,8,["user-permissions"])):h.value==="manager"?(u(),$(Ua,{key:3,"user-permissions":B.value,onSwitchRole:O},null,8,["user-permissions"])):R("",!0)])}}},Wa=je(Va,[["__scopeId","data-v-52312f83"]]);export{Wa as default};
