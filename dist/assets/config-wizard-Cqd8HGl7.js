import{_ as Pe,h as T,e as Y,d as ue,i as Ae,c as w,a as o,j as t,t as v,w as a,l as c,u as Be,v as z,f,m as Ee,o as _,b as h,F as q,s as V,k as P,p as u,x as F,O as Re,ab as je,Z as Oe,P as Ie}from"./index-CLrs7Nd9.js";const Me={class:"project-config-wizard"},qe={class:"wizard-header"},Ve={key:0,class:"subtitle"},Fe={key:1,class:"subtitle"},Ge={class:"steps-section"},Je={class:"wizard-content"},Le={key:0,class:"step-content"},Ze={key:1,class:"step-content"},He={class:"template-option"},Qe={class:"template-icon"},Xe={class:"template-name"},Ye={key:0,class:"template-info"},et={class:"template-description"},tt={class:"template-stats"},at={key:2,class:"step-content"},lt={class:"milestones-config"},nt={key:3,class:"step-content"},st={class:"wbs-config"},ot={class:"wbs-tree"},rt={style:{background:"#f0f0f0",padding:"10px","margin-bottom":"10px","font-size":"12px"}},it={key:0,style:{"text-align":"center",padding:"40px",color:"#999"}},ut={class:"tree-node"},dt={class:"node-title"},pt={key:0,class:"node-progress"},mt={class:"node-actions"},ft={class:"wbs-actions"},vt={class:"wizard-actions"},ct={key:0,class:"template-preview"},_t={class:"template-header"},gt={class:"template-icon"},yt={class:"template-description"},kt={class:"template-stats"},bt={class:"phases-preview"},Dt={class:"phase-header"},wt={class:"phase-number"},Ct={class:"phase-name"},xt={class:"phase-duration"},Ut={class:"phase-tasks"},St={__name:"config-wizard",setup($t){const de=Ee(),pe=Be(),C=T(0),G=T(!1),J=T(!1),p=Y({name:"",code:"",manager:"å½“å‰ç”¨æˆ·",department:"",budget:0,startDate:null,endDate:null,description:""}),$=Y({template:1,workMode:"hybrid",automation:["autoAssignTeam","autoCreateTasks"]}),L=T([{id:1,name:"æ ‡å‡†ç ”å‘æ¨¡æ¿",icon:"ğŸ“Š",description:"é€‚ç”¨äºå¸¸è§„è½¯ä»¶å¼€å‘é¡¹ç›®ï¼ŒåŒ…å«å®Œæ•´çš„å¼€å‘ç”Ÿå‘½å‘¨æœŸç®¡ç†",category:"è½¯ä»¶å¼€å‘",taskCount:25,milestoneCount:5,usageCount:156,isDefault:!0,structure:{phases:[{name:"éœ€æ±‚åˆ†æé˜¶æ®µ",tasks:["éœ€æ±‚æ”¶é›†","éœ€æ±‚åˆ†æ","éœ€æ±‚è¯„å®¡"],duration:10},{name:"è®¾è®¡é˜¶æ®µ",tasks:["æ¦‚è¦è®¾è®¡","è¯¦ç»†è®¾è®¡","è®¾è®¡è¯„å®¡"],duration:15},{name:"å¼€å‘é˜¶æ®µ",tasks:["å‰ç«¯å¼€å‘","åç«¯å¼€å‘","æ¥å£è”è°ƒ"],duration:30},{name:"æµ‹è¯•é˜¶æ®µ",tasks:["å•å…ƒæµ‹è¯•","é›†æˆæµ‹è¯•","ç³»ç»Ÿæµ‹è¯•"],duration:15},{name:"ä¸Šçº¿é˜¶æ®µ",tasks:["éƒ¨ç½²å‡†å¤‡","ç”Ÿäº§å‘å¸ƒ","éªŒè¯æµ‹è¯•"],duration:5}],milestones:[{name:"éœ€æ±‚ç¡®è®¤",phase:"éœ€æ±‚åˆ†æé˜¶æ®µ",type:"review"},{name:"è®¾è®¡è¯„å®¡",phase:"è®¾è®¡é˜¶æ®µ",type:"review"},{name:"å¼€å‘å®Œæˆ",phase:"å¼€å‘é˜¶æ®µ",type:"delivery"},{name:"æµ‹è¯•é€šè¿‡",phase:"æµ‹è¯•é˜¶æ®µ",type:"checkpoint"},{name:"é¡¹ç›®äº¤ä»˜",phase:"ä¸Šçº¿é˜¶æ®µ",type:"delivery"}]}},{id:2,name:"æ•æ·å¼€å‘æ¨¡æ¿",icon:"âš¡",description:"åŸºäºScrumæ¡†æ¶çš„æ•æ·å¼€å‘æ¨¡æ¿ï¼Œæ”¯æŒå¿«é€Ÿè¿­ä»£å’ŒæŒç»­äº¤ä»˜",category:"æ•æ·å¼€å‘",taskCount:18,milestoneCount:4,usageCount:89,structure:{phases:[{name:"Sprint 0 - é¡¹ç›®å¯åŠ¨",tasks:["äº§å“æ„¿æ™¯","ç”¨æˆ·æ•…äº‹æ¢³ç†","å›¢é˜Ÿç»„å»º"],duration:5},{name:"Sprint 1",tasks:["Sprintè§„åˆ’","åŠŸèƒ½å¼€å‘","Sprintè¯„å®¡"],duration:14},{name:"Sprint 2",tasks:["Sprintè§„åˆ’","åŠŸèƒ½å¼€å‘","Sprintè¯„å®¡"],duration:14},{name:"é¡¹ç›®æ”¶å°¾",tasks:["æœ€ç»ˆæµ‹è¯•","äº§å“å‘å¸ƒ","é¡¹ç›®å›é¡¾"],duration:7}]}},{id:3,name:"ç€‘å¸ƒå¼€å‘æ¨¡æ¿",icon:"ğŸ—ï¸",description:"ç»å…¸çš„ç€‘å¸ƒæ¨¡å‹ï¼Œé€‚åˆå¤§å‹ç³»ç»Ÿå’Œå¤æ‚é¡¹ç›®çš„ä¸¥æ ¼ç®¡ç†",category:"å¤§å‹ç³»ç»Ÿ",taskCount:35,milestoneCount:7,usageCount:42,structure:{phases:[{name:"é¡¹ç›®å¯åŠ¨",tasks:["é¡¹ç›®ç« ç¨‹","å¹²ç³»äººåˆ†æ","åˆæ­¥è®¡åˆ’"],duration:7},{name:"éœ€æ±‚å·¥ç¨‹",tasks:["éœ€æ±‚è·å–","éœ€æ±‚åˆ†æ","éœ€æ±‚è§„æ ¼","éœ€æ±‚éªŒè¯"],duration:20},{name:"ç³»ç»Ÿè®¾è®¡",tasks:["æ¶æ„è®¾è®¡","è¯¦ç»†è®¾è®¡","æ¥å£è®¾è®¡","æ•°æ®åº“è®¾è®¡"],duration:25},{name:"ç¼–ç å®ç°",tasks:["ç¼–ç è§„èŒƒ","æ¨¡å—å¼€å‘","ä»£ç å®¡æŸ¥","å•å…ƒæµ‹è¯•"],duration:40},{name:"ç³»ç»Ÿé›†æˆ",tasks:["é›†æˆè®¡åˆ’","é›†æˆæµ‹è¯•","æ€§èƒ½æµ‹è¯•","å®‰å…¨æµ‹è¯•"],duration:20},{name:"ç³»ç»Ÿæµ‹è¯•",tasks:["æµ‹è¯•è®¡åˆ’","åŠŸèƒ½æµ‹è¯•","ç”¨æˆ·éªŒæ”¶","ç¼ºé™·ä¿®å¤"],duration:25},{name:"éƒ¨ç½²ç»´æŠ¤",tasks:["éƒ¨ç½²è®¡åˆ’","ç”Ÿäº§éƒ¨ç½²","ç”¨æˆ·åŸ¹è®­","ç»´æŠ¤äº¤æ¥"],duration:10}]}},{id:4,name:"ç§‘ç ”é¡¹ç›®æ¨¡æ¿",icon:"ğŸ”¬",description:"ä¸“é—¨ä¸ºç§‘ç ”é¡¹ç›®è®¾è®¡ï¼Œç¬¦åˆç§‘ç ”ç®¡ç†è§„èŒƒå’Œæµç¨‹è¦æ±‚",category:"ç§‘ç ”ç®¡ç†",taskCount:22,milestoneCount:6,usageCount:78,structure:{phases:[{name:"ç«‹é¡¹é˜¶æ®µ",tasks:["é¡¹ç›®ç”³è¯·","å¯è¡Œæ€§åˆ†æ","ç«‹é¡¹è¯„å®¡"],duration:15},{name:"å¼€é¢˜é˜¶æ®µ",tasks:["æ–‡çŒ®è°ƒç ”","æŠ€æœ¯è·¯çº¿","å¼€é¢˜æŠ¥å‘Š"],duration:20},{name:"å®æ–½é˜¶æ®µ",tasks:["å®éªŒè®¾è®¡","æ•°æ®é‡‡é›†","é˜¶æ®µæ€§åˆ†æ"],duration:180},{name:"ä¸­æœŸé˜¶æ®µ",tasks:["ä¸­æœŸæ£€æŸ¥","è¿›åº¦æ±‡æŠ¥","è°ƒæ•´æ–¹æ¡ˆ"],duration:10},{name:"ç»“é¢˜é˜¶æ®µ",tasks:["æˆæœæ•´ç†","éªŒæ”¶ææ–™","ç»“é¢˜ç­”è¾©"],duration:30},{name:"æˆæœè½¬åŒ–",tasks:["è®ºæ–‡å‘è¡¨","ä¸“åˆ©ç”³è¯·","æŠ€æœ¯è½¬ç§»"],duration:60}]}}]),y=ue(()=>L.value.find(l=>l.id===$.template)),N=T([{name:"é¡¹ç›®å¼€é¢˜",enabled:!0,plannedDate:null,owner:"pm",prepareDays:7,description:"å‡†å¤‡å¼€é¢˜æŠ¥å‘Šï¼Œç»„ç»‡å¼€é¢˜ä¼šè®®"},{name:"ä¸­æœŸæ£€æŸ¥",enabled:!0,plannedDate:null,owner:"pm",prepareDays:10,description:"ä¸­æœŸè¿›å±•æ±‡æŠ¥ï¼Œé—®é¢˜æ¢³ç†åˆ†æ"},{name:"é¡¹ç›®éªŒæ”¶",enabled:!0,plannedDate:null,owner:"pm",prepareDays:14,description:"æ•´ç†é¡¹ç›®æˆæœï¼Œå‡†å¤‡éªŒæ”¶ææ–™"}]),b=T([{title:"é¡¹ç›®æ‰§è¡Œé˜¶æ®µ",key:"0",children:[{title:"éœ€æ±‚åˆ†æ",key:"0-0",progress:0},{title:"ç³»ç»Ÿè®¾è®¡",key:"0-1",progress:0},{title:"å¼€å‘å®ç°",key:"0-2",progress:0,children:[{title:"å‰ç«¯å¼€å‘",key:"0-2-0",progress:0},{title:"åç«¯å¼€å‘",key:"0-2-1",progress:0}]},{title:"æµ‹è¯•éªŒè¯",key:"0-3",progress:0},{title:"éƒ¨ç½²ä¸Šçº¿",key:"0-4",progress:0}]}]),i=Y({visible:!1,isAdd:!1,editingKey:null,parentKey:null,formData:{title:"",description:"",duration:1,priority:"medium",assignee:[],tags:[]}}),ee=T(),me={title:[{required:!0,message:"è¯·è¾“å…¥ä»»åŠ¡åç§°",trigger:"blur"},{min:2,max:50,message:"ä»»åŠ¡åç§°é•¿åº¦åœ¨ 2 åˆ° 50 ä¸ªå­—ç¬¦",trigger:"blur"}],duration:[{required:!0,message:"è¯·è¾“å…¥é¢„ä¼°å·¥æœŸ",trigger:"blur"}]},te=ue(()=>y.value?y.value.name:"æ ‡å‡†ç ”å‘æ¨¡æ¿"),fe=()=>{console.log("ğŸ” nextStep è¢«è°ƒç”¨ï¼Œå½“å‰æ­¥éª¤:",C.value),C.value===2&&(console.log("ğŸ“Š é‡Œç¨‹ç¢‘éªŒè¯è¯¦æƒ…:"),console.log("- milestonesæ•°æ®:",N.value),console.log("- å¯ç”¨çš„é‡Œç¨‹ç¢‘:",N.value.filter(e=>e.enabled)),N.value.forEach((e,s)=>{console.log(`  ${s+1}. ${e.name}: enabled=${e.enabled}, plannedDate=${e.plannedDate}`)}));const l=ae();console.log("âœ… éªŒè¯ç»“æœ:",l),l?(console.log("ğŸ¯ éªŒè¯é€šè¿‡ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥"),C.value++,console.log("ğŸ”¢ æ–°çš„æ­¥éª¤:",C.value)):console.log("âŒ éªŒè¯å¤±è´¥ï¼Œåœç•™åœ¨å½“å‰æ­¥éª¤")},ve=()=>{C.value--},ae=()=>{switch(C.value){case 0:if(!p.name)return f.error("è¯·å¡«å†™é¡¹ç›®åç§°"),!1;break;case 1:if(!$.template)return f.error("è¯·é€‰æ‹©ç®¡ç†æ¨¡æ¿"),!1;break;case 2:const l=N.value.filter(e=>e.enabled);if(l.length===0)return f.error("è‡³å°‘å¯ç”¨ä¸€ä¸ªé‡Œç¨‹ç¢‘"),!1;for(const e of l)if(!e.plannedDate||e.plannedDate===null||e.plannedDate==="")return f.error(`è¯·è®¾ç½®"${e.name}"çš„è®¡åˆ’æ—¶é—´`),!1;console.log("é‡Œç¨‹ç¢‘éªŒè¯é€šè¿‡:",l.map(e=>({name:e.name,date:e.plannedDate})));break}return!0},E=(l,e)=>{for(const s of l){if(s.key===e)return s;if(s.children){const r=E(s.children,e);if(r)return r}}return null},j=(l=null)=>{const e=Date.now();return l?`${l}-${e}`:`${e}`},ce=l=>{console.log("ç¼–è¾‘WBSèŠ‚ç‚¹:",l);const e=E(b.value,l);if(!e){f.error("æœªæ‰¾åˆ°è¦ç¼–è¾‘çš„èŠ‚ç‚¹");return}i.visible=!0,i.isAdd=!1,i.editingKey=l,i.formData={title:e.title||"",description:e.description||"",duration:e.duration||1,priority:e.priority||"medium",assignee:e.assignee||[],tags:e.tags||[]}},_e=l=>{console.log("æ·»åŠ å­èŠ‚ç‚¹åˆ°:",l),i.visible=!0,i.isAdd=!0,i.editingKey=null,i.parentKey=l,i.formData={title:"",description:"",duration:1,priority:"medium",assignee:[],tags:[]}},ge=()=>{console.log("æ·»åŠ æ ¹èŠ‚ç‚¹"),i.visible=!0,i.isAdd=!0,i.editingKey=null,i.parentKey=null,i.formData={title:"",description:"",duration:1,priority:"medium",assignee:[],tags:[]}},le=async()=>{try{await ee.value.validate();const l={title:i.formData.title,description:i.formData.description,duration:i.formData.duration,priority:i.formData.priority,assignee:i.formData.assignee,tags:i.formData.tags,progress:0};if(i.isAdd){const e=j(i.parentKey),s={...l,key:e};if(i.parentKey){const r=E(b.value,i.parentKey);if(r)r.children||(r.children=[]),r.children.push(s),f.success("å­èŠ‚ç‚¹æ·»åŠ æˆåŠŸ");else{f.error("æœªæ‰¾åˆ°çˆ¶èŠ‚ç‚¹");return}}else b.value.push(s),f.success("æ ¹èŠ‚ç‚¹æ·»åŠ æˆåŠŸ")}else{const e=E(b.value,i.editingKey);if(e)Object.assign(e,l),f.success("èŠ‚ç‚¹æ›´æ–°æˆåŠŸ");else{f.error("æœªæ‰¾åˆ°è¦ç¼–è¾‘çš„èŠ‚ç‚¹");return}}i.visible=!1}catch(l){console.log("è¡¨å•éªŒè¯å¤±è´¥:",l)}},ye=()=>{const l=(e,s)=>{for(let r=0;r<e.length;r++){if(e[r].key===s)return e.splice(r,1),!0;if(e[r].children&&l(e[r].children,s))return!0}return!1};l(b.value,i.editingKey)?(f.success("èŠ‚ç‚¹åˆ é™¤æˆåŠŸ"),i.visible=!1):f.error("åˆ é™¤å¤±è´¥ï¼Œæœªæ‰¾åˆ°èŠ‚ç‚¹")},ne=()=>{i.visible=!1},O=(l,e,s=null)=>{for(let r=0;r<l.length;r++){if(l[r].key===e)return{nodeList:l,index:r,parentKey:s,node:l[r]};if(l[r].children){const g=O(l[r].children,e,l[r].key);if(g)return g}}return null},ke=l=>{console.log("å‘ä¸Šç§»åŠ¨èŠ‚ç‚¹:",l);const e=O(b.value,l);if(!e){f.error("æœªæ‰¾åˆ°è¦ç§»åŠ¨çš„èŠ‚ç‚¹");return}const{nodeList:s,index:r,parentKey:g,node:d}=e;if(r>0)s.splice(r,1),s.splice(r-1,0,d),f.success("èŠ‚ç‚¹ä¸Šç§»æˆåŠŸ");else if(g){const m=O(b.value,g);m?(s.splice(r,1),d.key=j(m.parentKey),I(d,d.key),m.nodeList.splice(m.index,0,d),f.success("èŠ‚ç‚¹æå‡å±‚çº§æˆåŠŸ")):f.warning("å·²åœ¨æœ€é¡¶å±‚ï¼Œæ— æ³•ç»§ç»­ä¸Šç§»")}else f.warning("å·²åœ¨æœ€é¡¶å±‚ï¼Œæ— æ³•ä¸Šç§»")},be=l=>{console.log("å‘ä¸‹ç§»åŠ¨èŠ‚ç‚¹:",l);const e=O(b.value,l);if(!e){f.error("æœªæ‰¾åˆ°è¦ç§»åŠ¨çš„èŠ‚ç‚¹");return}const{nodeList:s,index:r,node:g}=e;r<s.length-1?(s.splice(r,1),s.splice(r+1,0,g),f.success("èŠ‚ç‚¹ä¸‹ç§»æˆåŠŸ")):f.warning("å·²åœ¨æœ€åº•å±‚ï¼Œæ— æ³•ä¸‹ç§»")},De=l=>{console.log("å¼€å§‹æ‹–æ‹½:",l)},we=l=>{console.log("æ‹–æ‹½è¿›å…¥:",l)},Ce=l=>{console.log("æ‹–æ‹½ç»è¿‡:",l)},xe=l=>{console.log("æ‹–æ‹½æ”¾ç½®:",l);const e=l.node.key,s=l.dragNode.key,r=l.node.pos.split("-"),g=l.dropPosition-Number(r[r.length-1]);if(console.log("æ‹–æ‹½è¯¦æƒ…:",{dragKey:s,dropKey:e,dropPosition:g,dropToGap:l.dropToGap}),s===e||s.indexOf(e+"-")===0){f.warning("ä¸èƒ½å°†èŠ‚ç‚¹æ‹–æ‹½åˆ°è‡ªå·±æˆ–å­èŠ‚ç‚¹ä¸Š");return}const d=se(b.value,s);if(!d){f.error("æœªæ‰¾åˆ°è¦ç§»åŠ¨çš„èŠ‚ç‚¹");return}if(l.dropToGap)Ue(b.value,d,e,g),f.success("èŠ‚ç‚¹æ’åºæˆåŠŸ");else{const m=E(b.value,e);m&&(m.children||(m.children=[]),d.key=j(e),I(d,d.key),m.children.push(d),f.success("èŠ‚ç‚¹ç§»åŠ¨æˆåŠŸ"))}},se=(l,e)=>{for(let s=0;s<l.length;s++){if(l[s].key===e)return l.splice(s,1)[0];if(l[s].children){const r=se(l[s].children,e);if(r)return r}}return null},Ue=(l,e,s,r)=>{let g=-1,d=null,m=null;const K=(S,R=null)=>{for(let W=0;W<S.length;W++){if(S[W].key===s)return g=W,d=S,m=R,!0;if(S[W].children&&K(S[W].children,S[W].key))return!0}return!1};if(K(l),g!==-1&&d){const S=r===-1?g:g+1;e.key=j(m),I(e,e.key),d.splice(S,0,e)}},I=(l,e)=>{l.children&&l.children.forEach((s,r)=>{s.key=`${e}-${Date.now()}-${r}`,I(s,s.key)})},Se=async()=>{if(ae())try{G.value=!0;const l={...p,...$,milestones:N.value.filter(e=>e.enabled),wbsStructure:b.value,configTime:new Date().toISOString()};console.log("é¡¹ç›®é…ç½®æ•°æ®:",l),await new Promise(e=>setTimeout(e,2e3)),f.success("é¡¹ç›®é…ç½®å®Œæˆï¼æ­£åœ¨è·³è½¬åˆ°é¡¹ç›®ç®¡ç†é¡µé¢..."),setTimeout(()=>{de.push("/project-manager/projects")},1e3)}catch(l){console.error("é…ç½®å¤±è´¥:",l),f.error("é…ç½®å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{G.value=!1}},Z=l=>{console.log("handleTemplateChange è¢«è°ƒç”¨ï¼ŒtemplateId:",l);const e=L.value.find(s=>s.id===l);console.log("æ‰¾åˆ°çš„æ¨¡æ¿:",e),e&&e.structure?(console.log("æ¨¡æ¿ç»“æ„:",e.structure),e.structure.milestones&&(N.value=e.structure.milestones.map((s,r)=>({name:s.name,description:`${s.name}é˜¶æ®µçš„å…³é”®èŠ‚ç‚¹`,plannedDate:z().add((r+1)*30,"day"),owner:"pm",prepareDays:7,enabled:!0,type:s.type||"checkpoint"})),console.log("æ›´æ–°åçš„é‡Œç¨‹ç¢‘:",N.value)),e.structure.phases&&(b.value=e.structure.phases.map((s,r)=>({key:`phase-${r}`,title:s.name,children:s.tasks.map((g,d)=>({key:`task-${r}-${d}`,title:g,children:[]}))})),console.log("æ›´æ–°åçš„WBSç»“æ„:",b.value)),f.success(`å·²åº”ç”¨æ¨¡æ¿: ${e.name}`)):console.log("æ¨¡æ¿æœªæ‰¾åˆ°æˆ–æ²¡æœ‰ç»“æ„æ•°æ®")},$e=()=>{y.value&&(J.value=!0)},Ne=()=>{const{projectId:l,projectName:e,projectCode:s,fromApproval:r}=pe.query;l&&(r?(p.name="æ™ºèƒ½ç§‘ç ”ç®¡ç†ç³»ç»Ÿå¼€å‘",p.code=`PRJ-2024-${l}`,p.department="æŠ€æœ¯ç ”å‘éƒ¨",p.budget=5e5,p.startDate=z(),p.endDate=z().add(6,"month"),p.description="å¼€å‘ä¸€å¥—æ™ºèƒ½åŒ–çš„ç§‘ç ”ç®¡ç†ç³»ç»Ÿï¼Œæå‡ç§‘ç ”é¡¹ç›®ç®¡ç†æ•ˆç‡"):(p.name=e||"é¡¹ç›®åç§°",p.code=s||`PRJ-${l}`,p.department="æŠ€æœ¯ç ”å‘éƒ¨",p.budget=5e5,p.startDate=z(),p.endDate=z().add(6,"month"),p.description="é¡¹ç›®é…ç½®æè¿°..."),N.value[0].plannedDate=z().add(1,"month"),N.value[1].plannedDate=z().add(3,"month"),N.value[2].plannedDate=z().add(6,"month"))};return Ae(()=>{Ne(),Z(1)}),(l,e)=>{const s=c("a-step"),r=c("a-steps"),g=c("a-input"),d=c("a-form-item"),m=c("a-col"),K=c("a-row"),S=c("a-input-number"),R=c("a-date-picker"),W=c("a-textarea"),H=c("a-form"),Q=c("a-tag"),k=c("a-select-option"),A=c("a-select"),x=c("a-button"),M=c("a-checkbox"),We=c("a-checkbox-group"),he=c("a-switch"),oe=c("a-card"),re=c("a-alert"),Ke=c("a-progress"),ze=c("a-tree"),X=c("a-statistic"),ie=c("a-modal"),Te=c("a-space");return _(),w("div",Me,[o("div",qe,[e[20]||(e[20]=o("h1",null,"é¡¹ç›®é…ç½®å‘å¯¼",-1)),p.name?(_(),w("p",Ve,"æ­£åœ¨é…ç½®é¡¹ç›®ï¼š"+v(p.name),1)):(_(),w("p",Fe,"é¡¹ç›®åˆå§‹åŒ–é…ç½®"))]),o("div",Ge,[t(r,{current:C.value,size:"small"},{default:a(()=>[t(s,{title:"åŸºæœ¬ä¿¡æ¯",description:"ç¡®è®¤é¡¹ç›®åŸºæœ¬ä¿¡æ¯"}),t(s,{title:"ç®¡ç†é…ç½®",description:"é€‰æ‹©æ¨¡æ¿å’Œæ¨¡å¼"}),t(s,{title:"é‡Œç¨‹ç¢‘",description:"åˆ¶å®šå…³é”®èŠ‚ç‚¹"}),t(s,{title:"ä»»åŠ¡è§„åˆ’",description:"åˆ›å»ºåˆå§‹WBS"})]),_:1},8,["current"])]),o("div",Je,[t(oe,{class:"step-card"},{default:a(()=>[C.value===0?(_(),w("div",Le,[e[21]||(e[21]=o("h3",null,"ğŸ“‹ ç¡®è®¤é¡¹ç›®åŸºæœ¬ä¿¡æ¯",-1)),e[22]||(e[22]=o("p",{class:"step-desc"},"ä»¥ä¸‹ä¿¡æ¯å·²ä»ç«‹é¡¹æ•°æ®è‡ªåŠ¨å¯¼å…¥ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´",-1)),t(H,{model:p,layout:"vertical",class:"config-form"},{default:a(()=>[t(K,{gutter:24},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(d,{label:"é¡¹ç›®åç§°",required:""},{default:a(()=>[t(g,{value:p.name,"onUpdate:value":e[0]||(e[0]=n=>p.name=n)},null,8,["value"])]),_:1})]),_:1}),t(m,{span:12},{default:a(()=>[t(d,{label:"é¡¹ç›®ç¼–å·"},{default:a(()=>[t(g,{value:p.code,"onUpdate:value":e[1]||(e[1]=n=>p.code=n),readonly:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(K,{gutter:24},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(d,{label:"é¡¹ç›®ç»ç†"},{default:a(()=>[t(g,{value:p.manager,"onUpdate:value":e[2]||(e[2]=n=>p.manager=n),readonly:""},null,8,["value"])]),_:1})]),_:1}),t(m,{span:12},{default:a(()=>[t(d,{label:"æ‰€å±éƒ¨é—¨"},{default:a(()=>[t(g,{value:p.department,"onUpdate:value":e[3]||(e[3]=n=>p.department=n),readonly:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(K,{gutter:24},{default:a(()=>[t(m,{span:8},{default:a(()=>[t(d,{label:"é¡¹ç›®é¢„ç®—"},{default:a(()=>[t(S,{value:p.budget,"onUpdate:value":e[4]||(e[4]=n=>p.budget=n),min:0,formatter:n=>`Â¥ ${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),style:{width:"100%"}},null,8,["value","formatter"])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{label:"å¼€å§‹æ—¶é—´"},{default:a(()=>[t(R,{value:p.startDate,"onUpdate:value":e[5]||(e[5]=n=>p.startDate=n),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{label:"ç»“æŸæ—¶é—´"},{default:a(()=>[t(R,{value:p.endDate,"onUpdate:value":e[6]||(e[6]=n=>p.endDate=n),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"é¡¹ç›®æè¿°"},{default:a(()=>[t(W,{value:p.description,"onUpdate:value":e[7]||(e[7]=n=>p.description=n),rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])])):h("",!0),C.value===1?(_(),w("div",Ze,[e[31]||(e[31]=o("h3",null,"âš™ï¸ é¡¹ç›®ç®¡ç†é…ç½®",-1)),e[32]||(e[32]=o("p",{class:"step-desc"},"é€‰æ‹©åˆé€‚çš„ç®¡ç†æ¨¡æ¿å’Œå·¥ä½œæ¨¡å¼ï¼Œè®¾ç½®è‡ªåŠ¨åŒ–åŠŸèƒ½",-1)),t(H,{model:$,layout:"vertical",class:"config-form"},{default:a(()=>[t(K,{gutter:24},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(d,{label:"ç®¡ç†æ¨¡æ¿"},{default:a(()=>[t(A,{value:$.template,"onUpdate:value":e[8]||(e[8]=n=>$.template=n),style:{width:"100%"},onChange:Z},{default:a(()=>[(_(!0),w(q,null,V(L.value,n=>(_(),P(k,{key:n.id,value:n.id},{default:a(()=>[o("div",He,[o("span",Qe,v(n.icon),1),o("span",Xe,v(n.name),1),t(Q,{size:"small",style:{"margin-left":"8px"}},{default:a(()=>[u(v(n.category),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),y.value?(_(),w("div",Ye,[o("p",et,v(y.value.description),1),o("div",tt,[o("span",null,v(y.value.taskCount)+" ä¸ªä»»åŠ¡",1),o("span",null,v(y.value.milestoneCount)+" ä¸ªé‡Œç¨‹ç¢‘",1),o("span",null,"å·²ä½¿ç”¨ "+v(y.value.usageCount)+" æ¬¡",1)]),t(x,{type:"link",size:"small",onClick:$e},{default:a(()=>[t(F(Re)),e[23]||(e[23]=u(" é¢„è§ˆæ¨¡æ¿ç»“æ„ ",-1))]),_:1,__:[23]})])):h("",!0)]),_:1})]),_:1}),t(m,{span:12},{default:a(()=>[t(d,{label:"å·¥ä½œæ¨¡å¼"},{default:a(()=>[t(A,{value:$.workMode,"onUpdate:value":e[9]||(e[9]=n=>$.workMode=n),style:{width:"100%"}},{default:a(()=>[t(k,{value:"hybrid"},{default:a(()=>e[24]||(e[24]=[u("æ··åˆæ¨¡å¼",-1)])),_:1,__:[24]}),t(k,{value:"remote"},{default:a(()=>e[25]||(e[25]=[u("è¿œç¨‹åä½œ",-1)])),_:1,__:[25]}),t(k,{value:"onsite"},{default:a(()=>e[26]||(e[26]=[u("ç°åœºåŠå…¬",-1)])),_:1,__:[26]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"è‡ªåŠ¨åŒ–è®¾ç½®"},{default:a(()=>[t(We,{value:$.automation,"onUpdate:value":e[10]||(e[10]=n=>$.automation=n)},{default:a(()=>[t(M,{value:"autoAssignTeam"},{default:a(()=>e[27]||(e[27]=[u("è‡ªåŠ¨æ¨èå›¢é˜Ÿæˆå‘˜",-1)])),_:1,__:[27]}),t(M,{value:"autoCreateTasks"},{default:a(()=>e[28]||(e[28]=[u("åŸºäºæ¨¡æ¿è‡ªåŠ¨åˆ›å»ºä»»åŠ¡",-1)])),_:1,__:[28]}),t(M,{value:"autoReports"},{default:a(()=>e[29]||(e[29]=[u("è‡ªåŠ¨ç”Ÿæˆè¿›åº¦æŠ¥å‘Š",-1)])),_:1,__:[29]}),t(M,{value:"autoNotifications"},{default:a(()=>e[30]||(e[30]=[u("è‡ªåŠ¨å‘é€æé†’é€šçŸ¥",-1)])),_:1,__:[30]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])):h("",!0),C.value===2?(_(),w("div",at,[e[36]||(e[36]=o("h3",null,"ğŸ¯ åˆ¶å®šé¡¹ç›®é‡Œç¨‹ç¢‘",-1)),e[37]||(e[37]=o("p",{class:"step-desc"},"è®¾ç½®é¡¹ç›®å…³é”®èŠ‚ç‚¹ï¼Œç”¨äºå‘ç®¡ç†è§’è‰²æäº¤ææ–™å’Œè¿›åº¦è·Ÿè¸ª",-1)),o("div",lt,[(_(!0),w(q,null,V(N.value,(n,U)=>(_(),w("div",{key:U,class:"milestone-item"},[t(oe,{size:"small",title:n.name},{extra:a(()=>[t(he,{checked:n.enabled,"onUpdate:checked":D=>n.enabled=D},null,8,["checked","onUpdate:checked"])]),default:a(()=>[t(K,{gutter:16},{default:a(()=>[t(m,{span:8},{default:a(()=>[t(d,{label:"è®¡åˆ’æ—¶é—´"},{default:a(()=>[t(R,{value:n.plannedDate,"onUpdate:value":D=>n.plannedDate=D,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),t(m,{span:8},{default:a(()=>[t(d,{label:"è´Ÿè´£äºº"},{default:a(()=>[t(A,{value:n.owner,"onUpdate:value":D=>n.owner=D,style:{width:"100%"}},{default:a(()=>[t(k,{value:"pm"},{default:a(()=>e[33]||(e[33]=[u("é¡¹ç›®ç»ç†",-1)])),_:1,__:[33]}),t(k,{value:"tech"},{default:a(()=>e[34]||(e[34]=[u("æŠ€æœ¯è´Ÿè´£äºº",-1)])),_:1,__:[34]}),t(k,{value:"qa"},{default:a(()=>e[35]||(e[35]=[u("è´¨é‡è´Ÿè´£äºº",-1)])),_:1,__:[35]})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),t(m,{span:8},{default:a(()=>[t(d,{label:"æå‰å‡†å¤‡å¤©æ•°"},{default:a(()=>[t(S,{value:n.prepareDays,"onUpdate:value":D=>n.prepareDays=D,min:1,max:30,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(d,{label:"é‡Œç¨‹ç¢‘æè¿°"},{default:a(()=>[t(W,{value:n.description,"onUpdate:value":D=>n.description=D,rows:2},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["title"])]))),128))])])):h("",!0),C.value===3?(_(),w("div",nt,[e[51]||(e[51]=o("h3",null,"ğŸ“Š åˆ›å»ºåˆå§‹WBSç»“æ„",-1)),e[52]||(e[52]=o("p",{class:"step-desc"},"åŸºäºé€‰æ‹©çš„ç®¡ç†æ¨¡æ¿ï¼Œåˆ›å»ºåˆå§‹çš„å·¥ä½œåˆ†è§£ç»“æ„",-1)),o("div",st,[t(re,{message:"æ¨¡æ¿ä»»åŠ¡ç»“æ„",description:`åŸºäº${te.value}ï¼Œç³»ç»Ÿå·²ä¸ºæ‚¨ç”Ÿæˆåˆå§‹ä»»åŠ¡ç»“æ„ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´`,type:"info","show-icon":"",style:{"margin-bottom":"24px"}},null,8,["description"]),o("div",ot,[o("div",rt,[e[39]||(e[39]=o("strong",null,"è°ƒè¯•ä¿¡æ¯ï¼š",-1)),e[40]||(e[40]=o("br",null,null,-1)),u(" WBSç»“æ„é•¿åº¦: "+v(b.value.length),1),e[41]||(e[41]=o("br",null,null,-1)),u(" å½“å‰æ­¥éª¤: "+v(C.value),1),e[42]||(e[42]=o("br",null,null,-1)),u(" é€‰ä¸­æ¨¡æ¿ID: "+v($.template),1),e[43]||(e[43]=o("br",null,null,-1)),u(" é€‰ä¸­æ¨¡æ¿å¯¹è±¡: "+v(y.value?y.value.name:"æœªæ‰¾åˆ°"),1),e[44]||(e[44]=o("br",null,null,-1)),u(" æ¨¡æ¿åç§°: "+v(te.value),1),e[45]||(e[45]=o("br",null,null,-1)),o("details",null,[e[38]||(e[38]=o("summary",null,"WBSå®Œæ•´æ•°æ® (ç‚¹å‡»å±•å¼€)",-1)),o("pre",null,v(JSON.stringify(b.value,null,2)),1)])]),t(re,{message:"æ‹–æ‹½æ’åºæç¤º",description:"æ‚¨å¯ä»¥æ‹–æ‹½èŠ‚ç‚¹æ¥è°ƒæ•´ä»»åŠ¡é¡ºåºï¼šæ‹–æ‹½åˆ°èŠ‚ç‚¹ä¹‹é—´å¯ä»¥è°ƒæ•´åŒçº§é¡ºåºï¼Œæ‹–æ‹½åˆ°èŠ‚ç‚¹å†…éƒ¨å¯ä»¥è®¾ä¸ºå­ä»»åŠ¡",type:"info","show-icon":"",closable:"",style:{"margin-bottom":"16px"}}),b.value.length===0?(_(),w("div",it,[e[47]||(e[47]=o("p",null,"ğŸ”§ WBSç»“æ„æ•°æ®ä¸ºç©ºï¼Œè¯·æ£€æŸ¥æ¨¡æ¿åº”ç”¨",-1)),t(x,{onClick:e[11]||(e[11]=n=>Z(1))},{default:a(()=>e[46]||(e[46]=[u("æ‰‹åŠ¨åº”ç”¨é»˜è®¤æ¨¡æ¿",-1)])),_:1,__:[46]})])):(_(),P(ze,{key:1,"tree-data":b.value,checkable:!1,selectable:!0,"default-expanded-keys":["0"],showLine:!0,showIcon:!1,draggable:!0,onDrop:xe,onDragenter:we,onDragover:Ce,onDragstart:De},{title:a(({title:n,key:U,progress:D})=>[o("div",ut,[o("span",dt,v(n),1),D!==void 0?(_(),w("span",pt,[t(Ke,{percent:D,size:"small",style:{width:"100px"}},null,8,["percent"])])):h("",!0),o("span",mt,[t(x,{type:"link",size:"small",onClick:B=>ke(U),title:"å‘ä¸Šç§»åŠ¨"},{icon:a(()=>[t(F(je))]),_:2},1032,["onClick"]),t(x,{type:"link",size:"small",onClick:B=>be(U),title:"å‘ä¸‹ç§»åŠ¨"},{icon:a(()=>[t(F(Oe))]),_:2},1032,["onClick"]),t(x,{type:"link",size:"small",onClick:B=>ce(U)},{default:a(()=>e[48]||(e[48]=[u("ç¼–è¾‘",-1)])),_:2,__:[48]},1032,["onClick"]),t(x,{type:"link",size:"small",onClick:B=>_e(U)},{default:a(()=>e[49]||(e[49]=[u("æ·»åŠ å­é¡¹",-1)])),_:2,__:[49]},1032,["onClick"])])])]),_:1},8,["tree-data"]))]),o("div",ft,[t(x,{type:"dashed",onClick:ge},{default:a(()=>[t(F(Ie)),e[50]||(e[50]=u(" æ·»åŠ æ ¹èŠ‚ç‚¹ ",-1))]),_:1,__:[50]})])])])):h("",!0),o("div",vt,[C.value>0?(_(),P(x,{key:0,onClick:ve},{default:a(()=>e[53]||(e[53]=[u("ä¸Šä¸€æ­¥",-1)])),_:1,__:[53]})):h("",!0),C.value<3?(_(),P(x,{key:1,type:"primary",onClick:fe},{default:a(()=>e[54]||(e[54]=[u("ä¸‹ä¸€æ­¥",-1)])),_:1,__:[54]})):h("",!0),C.value===3?(_(),P(x,{key:2,type:"primary",onClick:Se,loading:G.value},{default:a(()=>e[55]||(e[55]=[u(" å®Œæˆé…ç½® ",-1)])),_:1,__:[55]},8,["loading"])):h("",!0)])]),_:1})]),t(ie,{open:J.value,"onUpdate:open":e[12]||(e[12]=n=>J.value=n),title:"æ¨¡æ¿ç»“æ„é¢„è§ˆ",width:"800px",footer:null},{default:a(()=>{var n;return[y.value?(_(),w("div",ct,[o("div",_t,[o("span",gt,v(y.value.icon),1),o("h3",null,v(y.value.name),1),t(Q,null,{default:a(()=>[u(v(y.value.category),1)]),_:1})]),o("p",yt,v(y.value.description),1),o("div",kt,[t(K,{gutter:16},{default:a(()=>[t(m,{span:8},{default:a(()=>{var U,D;return[t(X,{title:"é¡¹ç›®é˜¶æ®µ",value:((D=(U=y.value.structure)==null?void 0:U.phases)==null?void 0:D.length)||0,suffix:"ä¸ª"},null,8,["value"])]}),_:1}),t(m,{span:8},{default:a(()=>[t(X,{title:"ä»»åŠ¡èŠ‚ç‚¹",value:y.value.taskCount,suffix:"ä¸ª"},null,8,["value"])]),_:1}),t(m,{span:8},{default:a(()=>[t(X,{title:"é‡Œç¨‹ç¢‘",value:y.value.milestoneCount,suffix:"ä¸ª"},null,8,["value"])]),_:1})]),_:1})]),o("div",bt,[e[56]||(e[56]=o("h4",null,"é¡¹ç›®é˜¶æ®µç»“æ„",-1)),(_(!0),w(q,null,V(((n=y.value.structure)==null?void 0:n.phases)||[],(U,D)=>(_(),w("div",{key:D,class:"phase-item"},[o("div",Dt,[o("span",wt,v(D+1),1),o("span",Ct,v(U.name),1),o("span",xt,v(U.duration)+" å¤©",1)]),o("div",Ut,[(_(!0),w(q,null,V(U.tasks,B=>(_(),P(Q,{key:B,size:"small"},{default:a(()=>[u(v(B),1)]),_:2},1024))),128))])]))),128))])])):h("",!0)]}),_:1},8,["open"]),t(ie,{open:i.visible,"onUpdate:open":e[19]||(e[19]=n=>i.visible=n),title:i.isAdd?"æ·»åŠ ä»»åŠ¡èŠ‚ç‚¹":"ç¼–è¾‘ä»»åŠ¡èŠ‚ç‚¹",width:"600px",onOk:le,onCancel:ne},{footer:a(()=>[t(Te,null,{default:a(()=>[t(x,{onClick:ne},{default:a(()=>e[69]||(e[69]=[u("å–æ¶ˆ",-1)])),_:1,__:[69]}),i.isAdd?h("",!0):(_(),P(x,{key:0,type:"danger",onClick:ye},{default:a(()=>e[70]||(e[70]=[u(" åˆ é™¤èŠ‚ç‚¹ ",-1)])),_:1,__:[70]})),t(x,{type:"primary",onClick:le},{default:a(()=>[u(v(i.isAdd?"æ·»åŠ ":"ä¿å­˜"),1)]),_:1})]),_:1})]),default:a(()=>[t(H,{model:i.formData,rules:me,ref_key:"wbsEditFormRef",ref:ee,layout:"vertical"},{default:a(()=>[t(d,{label:"ä»»åŠ¡åç§°",name:"title"},{default:a(()=>[t(g,{value:i.formData.title,"onUpdate:value":e[13]||(e[13]=n=>i.formData.title=n),placeholder:"è¯·è¾“å…¥ä»»åŠ¡åç§°"},null,8,["value"])]),_:1}),t(d,{label:"ä»»åŠ¡æè¿°",name:"description"},{default:a(()=>[t(W,{value:i.formData.description,"onUpdate:value":e[14]||(e[14]=n=>i.formData.description=n),placeholder:"è¯·è¾“å…¥ä»»åŠ¡æè¿°",rows:3},null,8,["value"])]),_:1}),t(K,{gutter:16},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(d,{label:"é¢„ä¼°å·¥æœŸ(å¤©)",name:"duration"},{default:a(()=>[t(S,{value:i.formData.duration,"onUpdate:value":e[15]||(e[15]=n=>i.formData.duration=n),min:1,max:365,placeholder:"é¢„ä¼°å·¥æœŸ",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(m,{span:12},{default:a(()=>[t(d,{label:"ä¼˜å…ˆçº§",name:"priority"},{default:a(()=>[t(A,{value:i.formData.priority,"onUpdate:value":e[16]||(e[16]=n=>i.formData.priority=n),placeholder:"é€‰æ‹©ä¼˜å…ˆçº§"},{default:a(()=>[t(k,{value:"high"},{default:a(()=>e[57]||(e[57]=[u("é«˜",-1)])),_:1,__:[57]}),t(k,{value:"medium"},{default:a(()=>e[58]||(e[58]=[u("ä¸­",-1)])),_:1,__:[58]}),t(k,{value:"low"},{default:a(()=>e[59]||(e[59]=[u("ä½",-1)])),_:1,__:[59]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{label:"è´Ÿè´£äºº",name:"assignee"},{default:a(()=>[t(A,{value:i.formData.assignee,"onUpdate:value":e[17]||(e[17]=n=>i.formData.assignee=n),placeholder:"é€‰æ‹©è´Ÿè´£äºº",mode:"multiple"},{default:a(()=>[t(k,{value:"user1"},{default:a(()=>e[60]||(e[60]=[u("å¼ ä¸‰",-1)])),_:1,__:[60]}),t(k,{value:"user2"},{default:a(()=>e[61]||(e[61]=[u("æå››",-1)])),_:1,__:[61]}),t(k,{value:"user3"},{default:a(()=>e[62]||(e[62]=[u("ç‹äº”",-1)])),_:1,__:[62]}),t(k,{value:"user4"},{default:a(()=>e[63]||(e[63]=[u("èµµå…­",-1)])),_:1,__:[63]})]),_:1},8,["value"])]),_:1}),t(d,{label:"ä»»åŠ¡æ ‡ç­¾",name:"tags"},{default:a(()=>[t(A,{value:i.formData.tags,"onUpdate:value":e[18]||(e[18]=n=>i.formData.tags=n),placeholder:"é€‰æ‹©ä»»åŠ¡æ ‡ç­¾",mode:"tags"},{default:a(()=>[t(k,{value:"å¼€å‘"},{default:a(()=>e[64]||(e[64]=[u("å¼€å‘",-1)])),_:1,__:[64]}),t(k,{value:"æµ‹è¯•"},{default:a(()=>e[65]||(e[65]=[u("æµ‹è¯•",-1)])),_:1,__:[65]}),t(k,{value:"è®¾è®¡"},{default:a(()=>e[66]||(e[66]=[u("è®¾è®¡",-1)])),_:1,__:[66]}),t(k,{value:"æ–‡æ¡£"},{default:a(()=>e[67]||(e[67]=[u("æ–‡æ¡£",-1)])),_:1,__:[67]}),t(k,{value:"è¯„å®¡"},{default:a(()=>e[68]||(e[68]=[u("è¯„å®¡",-1)])),_:1,__:[68]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}},Wt=Pe(St,[["__scopeId","data-v-ca3d813e"]]);export{Wt as default};
