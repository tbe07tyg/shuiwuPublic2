import{j as e,I as ke,_ as G,l as r,c as P,o as g,a as s,t as _,w as t,q as h,x as b,p as n,T as te,S as se,a4 as xe,b as L,C as Ce,h as U,e as we,A as $e,k as j,f as M,z as Oe,V as De,F as V,s as W,Q as Ee,D as re,d as Se,i as Re,m as Pe,H as Ie,n as ze,a2 as Ue,Z as Ae,J as Me,P as je}from"./index-BG3bheTR.js";import{M as Be}from"./MoreOutlined-gm8wqwLf.js";import{U as Fe}from"./UserOutlined-eJbNfDXj.js";import{B as ue}from"./BulbOutlined-Pu_cVs3c.js";import{U as Le}from"./UploadOutlined-RXM_KW39.js";import{P as Te}from"./PageContainer-9ceNTmC2.js";/* empty css                                                                      */var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};function ie(i){for(var m=1;m<arguments.length;m++){var y=arguments[m]!=null?Object(arguments[m]):{},q=Object.keys(y);typeof Object.getOwnPropertySymbols=="function"&&(q=q.concat(Object.getOwnPropertySymbols(y).filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable}))),q.forEach(function(C){He(i,C,y[C])})}return i}function He(i,m,y){return m in i?Object.defineProperty(i,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):i[m]=y,i}var le=function(m,y){var q=ie({},m,y.attrs);return e(ke,ie({},q,{icon:Ve}),null)};le.displayName="HistoryOutlined";le.inheritAttrs=!1;const Ne={class:"card-header"},Qe={class:"card-title"},he={class:"card-content"},We={class:"card-desc"},Ge={class:"card-meta"},Je={class:"card-info"},Ze={class:"info-item"},Xe={class:"info-item"},Ye={key:0,class:"card-effect"},Ke={class:"effect-title"},et={class:"effect-content"},tt={class:"card-footer"},lt={class:"footer-main"},nt={class:"status-actions"},ot={__name:"RequirementCard",props:{requirement:{type:Object,required:!0}},emits:["edit","delete","view","start-research","status-change","priority-change"],setup(i,{emit:m}){const y=i,q=m;function C(u){return{高:"red",中:"orange",低:"blue"}[u]||"default"}function I(u){q("status-change",y.requirement.id,u)}function f(u){q("priority-change",y.requirement.id,u)}return(u,a)=>{const O=r("a-menu-item"),A=r("a-menu-divider"),E=r("a-menu"),B=r("a-button"),p=r("a-dropdown"),o=r("a-tag"),c=r("a-select-option"),w=r("a-select");return g(),P("div",{class:"requirement-card",onClick:a[7]||(a[7]=S=>u.$emit("view",i.requirement))},[s("div",Ne,[s("div",Qe,_(i.requirement.title),1),e(p,{trigger:"click",onClick:a[4]||(a[4]=h(()=>{},["stop"]))},{overlay:t(()=>[e(E,null,{default:t(()=>[e(O,{onClick:a[0]||(a[0]=S=>u.$emit("edit",i.requirement))},{default:t(()=>[e(b(te)),a[8]||(a[8]=n(" 编辑 "))]),_:1,__:[8]}),e(O,{onClick:a[1]||(a[1]=S=>u.$emit("start-research",i.requirement))},{default:t(()=>[e(b(se)),a[9]||(a[9]=n(" 开始调研 "))]),_:1,__:[9]}),e(A),e(O,{onClick:a[2]||(a[2]=S=>u.$emit("delete",i.requirement)),style:{color:"#ff4d4f"}},{default:t(()=>[e(b(xe)),a[10]||(a[10]=n(" 删除 "))]),_:1,__:[10]})]),_:1})]),default:t(()=>[e(B,{type:"text",size:"small",onClick:a[3]||(a[3]=h(()=>{},["stop"]))},{default:t(()=>[e(b(Be))]),_:1})]),_:1})]),s("div",he,[s("p",We,_(i.requirement.description),1),s("div",Ge,[e(o,{color:C(i.requirement.priority),size:"small"},{default:t(()=>[n(_(i.requirement.priority)+"优先级 ",1)]),_:1},8,["color"]),e(o,{size:"small"},{default:t(()=>[n(_(i.requirement.category),1)]),_:1})]),s("div",Je,[s("div",Ze,[e(b(Fe)),s("span",null,_(i.requirement.proposer),1)]),s("div",Xe,[e(b(Ce)),s("span",null,_(i.requirement.createdAt),1)])]),i.requirement.expectedEffect?(g(),P("div",Ye,[s("div",Ke,[e(b(ue)),a[11]||(a[11]=s("span",null,"预期效果：",-1))]),s("div",et,_(i.requirement.expectedEffect),1)])):L("",!0)]),s("div",tt,[s("div",lt,[s("div",nt,[e(w,{value:i.requirement.status,size:"small",style:{width:"100px"},onChange:I,onClick:a[5]||(a[5]=h(()=>{},["stop"]))},{default:t(()=>[e(c,{value:"待分析"},{default:t(()=>a[12]||(a[12]=[n("待分析")])),_:1,__:[12]}),e(c,{value:"进行中"},{default:t(()=>a[13]||(a[13]=[n("进行中")])),_:1,__:[13]}),e(c,{value:"已完成"},{default:t(()=>a[14]||(a[14]=[n("已完成")])),_:1,__:[14]}),e(c,{value:"已暂停"},{default:t(()=>a[15]||(a[15]=[n("已暂停")])),_:1,__:[15]})]),_:1},8,["value"]),e(w,{value:i.requirement.priority,size:"small",style:{width:"80px"},onChange:f,onClick:a[6]||(a[6]=h(()=>{},["stop"]))},{default:t(()=>[e(c,{value:"高"},{default:t(()=>a[16]||(a[16]=[n("高")])),_:1,__:[16]}),e(c,{value:"中"},{default:t(()=>a[17]||(a[17]=[n("中")])),_:1,__:[17]}),e(c,{value:"低"},{default:t(()=>a[18]||(a[18]=[n("低")])),_:1,__:[18]})]),_:1},8,["value"])])])])])}}},at=G(ot,[["__scopeId","data-v-e3fd684f"]]),it={__name:"RequirementModal",props:{visible:{type:Boolean,default:!1},requirement:{type:Object,default:null}},emits:["update:visible","save"],setup(i,{emit:m}){const y=i,q=m,C=U(),I=U(!1),f=we({title:"",description:"",category:"",priority:"",proposer:"当前用户",proposerDept:"",expectedEffect:"",attachments:[]}),u={title:[{required:!0,message:"请输入需求标题",trigger:"blur"},{min:5,max:100,message:"标题长度在5-100个字符",trigger:"blur"}],description:[{required:!0,message:"请输入需求描述",trigger:"blur"},{min:20,max:500,message:"描述长度在20-500个字符",trigger:"blur"}],category:[{required:!0,message:"请选择需求分类",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],proposerDept:[{required:!0,message:"请选择提出部门",trigger:"change"}]};$e(()=>y.requirement,p=>{p?Object.assign(f,{title:p.title||"",description:p.description||"",category:p.category||"",priority:p.priority||"",proposer:p.proposer||"当前用户",proposerDept:p.proposerDept||"",expectedEffect:p.expectedEffect||p.businessValue||"",attachments:p.attachments||[]}):a()},{immediate:!0});function a(){var p;Object.assign(f,{title:"",description:"",category:"",priority:"",proposer:"当前用户",proposerDept:"",expectedEffect:"",attachments:[]}),(p=C.value)==null||p.resetFields()}async function O(){try{await C.value.validate(),I.value=!0;const p={...f};await new Promise(o=>setTimeout(o,1e3)),q("save",p),q("update:visible",!1)}catch(p){console.error("表单验证失败:",p)}finally{I.value=!1}}function A(){q("update:visible",!1)}function E(p){return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif"].includes(p.type)?(p.size/1024/1024<10||M.error("文件大小不能超过10MB!"),!1):(M.error("只能上传PDF、Word、Excel、图片格式的文件!"),!1)}function B(p){const o=f.attachments.indexOf(p),c=f.attachments.slice();c.splice(o,1),f.attachments=c}return(p,o)=>{const c=r("a-input"),w=r("a-form-item"),S=r("a-col"),F=r("a-row"),D=r("a-select-option"),R=r("a-select"),H=r("a-textarea"),T=r("a-button"),N=r("a-upload"),J=r("a-form"),Z=r("a-modal");return g(),j(Z,{open:i.visible,title:i.requirement?"编辑需求":"新增需求",width:"600px",onOk:O,onCancel:A,"confirm-loading":I.value},{default:t(()=>[e(J,{ref_key:"formRef",ref:C,model:f,rules:u,layout:"vertical","label-col":{span:24},"wrapper-col":{span:24}},{default:t(()=>[e(F,{gutter:16},{default:t(()=>[e(S,{span:24},{default:t(()=>[e(w,{label:"需求标题",name:"title",required:""},{default:t(()=>[e(c,{value:f.title,"onUpdate:value":o[0]||(o[0]=$=>f.title=$),placeholder:"请输入需求标题","max-length":100,"show-count":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(F,{gutter:16},{default:t(()=>[e(S,{span:8},{default:t(()=>[e(w,{label:"需求分类",name:"category",required:""},{default:t(()=>[e(R,{value:f.category,"onUpdate:value":o[1]||(o[1]=$=>f.category=$),placeholder:"请选择分类"},{default:t(()=>[e(D,{value:"技术创新"},{default:t(()=>o[7]||(o[7]=[n("技术创新")])),_:1,__:[7]}),e(D,{value:"工艺改进"},{default:t(()=>o[8]||(o[8]=[n("工艺改进")])),_:1,__:[8]}),e(D,{value:"设备更新"},{default:t(()=>o[9]||(o[9]=[n("设备更新")])),_:1,__:[9]}),e(D,{value:"质量提升"},{default:t(()=>o[10]||(o[10]=[n("质量提升")])),_:1,__:[10]}),e(D,{value:"成本控制"},{default:t(()=>o[11]||(o[11]=[n("成本控制")])),_:1,__:[11]})]),_:1},8,["value"])]),_:1})]),_:1}),e(S,{span:8},{default:t(()=>[e(w,{label:"优先级",name:"priority",required:""},{default:t(()=>[e(R,{value:f.priority,"onUpdate:value":o[2]||(o[2]=$=>f.priority=$),placeholder:"请选择优先级"},{default:t(()=>[e(D,{value:"高"},{default:t(()=>o[12]||(o[12]=[n("高优先级")])),_:1,__:[12]}),e(D,{value:"中"},{default:t(()=>o[13]||(o[13]=[n("中优先级")])),_:1,__:[13]}),e(D,{value:"低"},{default:t(()=>o[14]||(o[14]=[n("低优先级")])),_:1,__:[14]})]),_:1},8,["value"])]),_:1})]),_:1}),e(S,{span:8},{default:t(()=>[e(w,{label:"提出部门",name:"proposerDept",required:""},{default:t(()=>[e(R,{value:f.proposerDept,"onUpdate:value":o[3]||(o[3]=$=>f.proposerDept=$),placeholder:"请选择部门"},{default:t(()=>[e(D,{value:"技术部"},{default:t(()=>o[15]||(o[15]=[n("技术部")])),_:1,__:[15]}),e(D,{value:"工艺部"},{default:t(()=>o[16]||(o[16]=[n("工艺部")])),_:1,__:[16]}),e(D,{value:"运维部"},{default:t(()=>o[17]||(o[17]=[n("运维部")])),_:1,__:[17]}),e(D,{value:"质量部"},{default:t(()=>o[18]||(o[18]=[n("质量部")])),_:1,__:[18]}),e(D,{value:"财务部"},{default:t(()=>o[19]||(o[19]=[n("财务部")])),_:1,__:[19]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(F,{gutter:16},{default:t(()=>[e(S,{span:24},{default:t(()=>[e(w,{label:"需求描述",name:"description",required:""},{default:t(()=>[e(H,{value:f.description,"onUpdate:value":o[4]||(o[4]=$=>f.description=$),placeholder:"请详细描述需求内容、背景和预期目标",rows:4,"max-length":500,"show-count":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(F,{gutter:16},{default:t(()=>[e(S,{span:24},{default:t(()=>[e(w,{label:"预期达到效果",name:"expectedEffect"},{default:t(()=>[e(H,{value:f.expectedEffect,"onUpdate:value":o[5]||(o[5]=$=>f.expectedEffect=$),placeholder:"请描述预期达到的效果和收益",rows:3,"max-length":300,"show-count":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(F,{gutter:16},{default:t(()=>[e(S,{span:24},{default:t(()=>[e(w,{label:"相关附件"},{default:t(()=>[e(N,{"file-list":f.attachments,"onUpdate:fileList":o[6]||(o[6]=$=>f.attachments=$),"before-upload":E,remove:B,multiple:""},{default:t(()=>[e(T,null,{default:t(()=>[e(b(Le)),o[20]||(o[20]=n(" 选择文件 "))]),_:1,__:[20]}),o[21]||(o[21]=s("span",{style:{"margin-left":"8px",color:"#999","font-size":"12px"}}," 支持PDF、Word、Excel、图片格式，单文件最大10MB ",-1))]),_:1,__:[21]},8,["file-list"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","confirm-loading"])}}},st=G(it,[["__scopeId","data-v-bfed0498"]]),rt={class:"requirement-detail"},ut={class:"detail-section"},dt={class:"section-title"},ft={class:"detail-section"},mt={class:"section-title"},pt={class:"description-content"},ct={key:0,class:"detail-section"},_t={class:"section-title"},vt={class:"expected-effect"},gt={key:1,class:"detail-section"},yt={class:"section-title"},bt={class:"attachments-list"},qt={class:"file-name"},kt={key:2,class:"detail-section"},xt={class:"section-title"},Ct={class:"timeline-content"},wt={class:"timeline-header"},$t={class:"timeline-user"},Ot={class:"timeline-time"},Dt={class:"timeline-action"},Et={key:0,class:"timeline-comment"},St={class:"detail-actions"},Rt={__name:"RequirementDetail",props:{requirement:{type:Object,required:!0}},emits:["edit","start-research"],setup(i,{emit:m}){function y(f){return{高:"red",中:"orange",低:"blue"}[f]||"default"}function q(f){return{待分析:"default",进行中:"processing",已完成:"success",已暂停:"warning"}[f]||"default"}function C(f){return{create:"blue",edit:"orange",status:"green",comment:"gray"}[f]||"blue"}function I(){M.success("需求详情导出功能开发中...")}return(f,u)=>{const a=r("a-descriptions-item"),O=r("a-tag"),A=r("a-descriptions"),E=r("a-button"),B=r("a-timeline-item"),p=r("a-timeline"),o=r("a-space");return g(),P("div",rt,[s("div",ut,[s("h3",dt,[e(b(Oe)),u[2]||(u[2]=n(" 基本信息 "))]),e(A,{column:2,bordered:"",size:"small"},{default:t(()=>[e(a,{label:"需求标题",span:2},{default:t(()=>[n(_(i.requirement.title),1)]),_:1}),e(a,{label:"需求分类"},{default:t(()=>[e(O,null,{default:t(()=>[n(_(i.requirement.category),1)]),_:1})]),_:1}),e(a,{label:"优先级"},{default:t(()=>[e(O,{color:y(i.requirement.priority)},{default:t(()=>[n(_(i.requirement.priority)+"优先级 ",1)]),_:1},8,["color"])]),_:1}),e(a,{label:"当前状态"},{default:t(()=>[e(O,{color:q(i.requirement.status)},{default:t(()=>[n(_(i.requirement.status),1)]),_:1},8,["color"])]),_:1}),e(a,{label:"提出人"},{default:t(()=>[n(_(i.requirement.proposer),1)]),_:1}),e(a,{label:"提出部门"},{default:t(()=>[n(_(i.requirement.proposerDept),1)]),_:1}),e(a,{label:"提出时间",span:2},{default:t(()=>[n(_(i.requirement.createdAt),1)]),_:1})]),_:1})]),s("div",ft,[s("h3",mt,[e(b(te)),u[3]||(u[3]=n(" 需求描述 "))]),s("div",pt,_(i.requirement.description),1)]),i.requirement.expectedEffect?(g(),P("div",ct,[s("h3",_t,[e(b(ue)),u[4]||(u[4]=n(" 预期达到效果 "))]),s("div",vt,_(i.requirement.expectedEffect),1)])):L("",!0),i.requirement.attachments&&i.requirement.attachments.length?(g(),P("div",gt,[s("h3",yt,[e(b(De)),u[5]||(u[5]=n(" 相关附件 "))]),s("div",bt,[(g(!0),P(V,null,W(i.requirement.attachments,(c,w)=>(g(),P("div",{key:w,class:"attachment-item"},[e(b(Ee)),s("span",qt,_(c.name),1),e(E,{type:"link",size:"small"},{default:t(()=>u[6]||(u[6]=[n("下载")])),_:1,__:[6]})]))),128))])])):L("",!0),i.requirement.comments&&i.requirement.comments.length?(g(),P("div",kt,[s("h3",xt,[e(b(le)),u[7]||(u[7]=n(" 操作历史 "))]),e(p,null,{default:t(()=>[(g(!0),P(V,null,W(i.requirement.comments,(c,w)=>(g(),j(B,{key:w,color:C(c.type)},{default:t(()=>[s("div",Ct,[s("div",wt,[s("span",$t,_(c.user),1),s("span",Ot,_(c.time),1)]),s("div",Dt,_(c.action),1),c.comment?(g(),P("div",Et,_(c.comment),1)):L("",!0)])]),_:2},1032,["color"]))),128))]),_:1})])):L("",!0),s("div",St,[e(o,null,{default:t(()=>[e(E,{type:"primary",onClick:u[0]||(u[0]=c=>f.$emit("edit",i.requirement))},{default:t(()=>[e(b(te)),u[8]||(u[8]=n(" 编辑需求 "))]),_:1,__:[8]}),e(E,{type:"primary",ghost:"",onClick:u[1]||(u[1]=c=>f.$emit("start-research",i.requirement))},{default:t(()=>[e(b(se)),u[9]||(u[9]=n(" 开始调研 "))]),_:1,__:[9]}),e(E,{onClick:I},{default:t(()=>[e(b(re)),u[10]||(u[10]=n(" 导出详情 "))]),_:1,__:[10]})]),_:1})])])}}},Pt=G(Rt,[["__scopeId","data-v-388fd841"]]),It={class:"filter-section"},zt={class:"total-count-row"},Ut={class:"count-num"},At={class:"status-board"},Mt={class:"status-header"},jt={class:"requirement-cards"},Bt={key:1,class:"empty-state"},Ft={class:"table-section"},Lt={__name:"index",setup(i){Pe();const m=U([]),y=U([]),q=U(!1),C=U(!1),I=U(null),f=U(null),u=U("board"),a=U(""),O=U(""),A=U(""),E=U(""),B=[{value:"待分析",label:"待分析",color:"#d9d9d9"},{value:"进行中",label:"进行中",color:"#1890ff"},{value:"已完成",label:"已完成",color:"#52c41a"},{value:"已暂停",label:"已暂停",color:"#faad14"}],p=Se(()=>B.filter(d=>S(d.value).length>0)),o=[{title:"需求标题",dataIndex:"title",key:"title",width:200,ellipsis:!0},{title:"需求分类",dataIndex:"category",key:"category",width:120},{title:"优先级",dataIndex:"priority",key:"priority",width:80},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"提出人",dataIndex:"proposer",key:"proposer",width:100},{title:"提出部门",dataIndex:"proposerDept",key:"proposerDept",width:100},{title:"提出时间",dataIndex:"createdAt",key:"createdAt",width:120},{title:"操作",key:"actions",width:180,fixed:"right"}];function c(){m.value=[{id:"REQ001",title:"智能水质监测系统升级",description:"对现有水质监测系统进行智能化升级，增加AI预警功能和大数据分析能力",category:"技术创新",priority:"高",status:"待分析",proposer:"张三",proposerDept:"技术部",createdAt:"2024-01-15",expectedEffect:"提升水质监测精度30%，降低人工成本50%，实现24小时无人值守监测",attachments:[]},{id:"REQ002",title:"污水处理工艺优化研究",description:"研究新型污水处理工艺，提高处理效率，降低能耗",category:"工艺改进",priority:"中",status:"进行中",proposer:"李四",proposerDept:"工艺部",createdAt:"2024-01-20",expectedEffect:"处理效率提升20%，能耗降低15%，污水处理达标率99%以上",attachments:[]},{id:"REQ003",title:"管网漏损检测设备更新",description:"更新老旧的管网漏损检测设备，采用声学检测和压力监测技术",category:"设备更新",priority:"高",status:"已完成",proposer:"王五",proposerDept:"运维部",createdAt:"2024-01-10",expectedEffect:"漏损率降低25%，维护成本减少40%，管网运行稳定性大幅提升",attachments:[]}],y.value=[...m.value]}function w(d){return y.value.filter(l=>l.status===d).length}function S(d){return y.value.filter(l=>l.status===d)}function F(d){return{高:"red",中:"orange",低:"blue"}[d]||"default"}function D(d){return{待分析:"default",进行中:"processing",已完成:"success",已暂停:"warning"}[d]||"default"}function R(){let d=[...m.value];if(a.value&&(d=d.filter(l=>l.status===a.value)),O.value&&(d=d.filter(l=>l.priority===O.value)),A.value&&(d=d.filter(l=>l.category===A.value)),E.value){const l=E.value.toLowerCase();d=d.filter(k=>k.title.toLowerCase().includes(l)||k.description.toLowerCase().includes(l))}y.value=d}function H(d){if(I.value){const l=m.value.findIndex(k=>k.id===I.value.id);m.value[l]={...d},M.success("需求更新成功")}else{const l={...d,id:`REQ${String(m.value.length+1).padStart(3,"0")}`,createdAt:new Date().toISOString().split("T")[0],status:"待分析"};m.value.unshift(l),M.success("需求添加成功")}R(),q.value=!1,I.value=null}function T(d){I.value={...d},q.value=!0}function N(d){const l=m.value.findIndex(k=>k.id===d.id);m.value.splice(l,1),R(),M.success("需求删除成功")}function J(d){f.value=d,C.value=!0}function Z(d){const l={...d,id:`REQ${String(m.value.length+1).padStart(3,"0")}`,title:`${d.title} (副本)`,status:"待分析",createdAt:new Date().toISOString().split("T")[0]};m.value.unshift(l),R(),M.success("需求复制成功")}function $(d,l){const k=m.value.find(x=>x.id===d);k&&(k.status=l,R(),M.success(`需求状态已更新为：${l}`))}function de(d,l){const k=m.value.find(x=>x.id===d);k&&(k.priority=l,R(),M.success(`需求优先级已更新为：${l}`))}function ne(d){$(d.id,"进行中"),M.success("已开始内部评估，请完善评估信息")}function fe(){M.success("需求导出功能开发中...")}function me(){a.value="",O.value="",A.value="",E.value="",R()}return Re(()=>{c()}),(d,l)=>{const k=r("a-button"),x=r("a-select-option"),X=r("a-select"),pe=r("a-input-search"),oe=r("a-space"),Y=r("a-col"),ae=r("a-row"),ce=r("a-badge"),_e=r("a-empty"),K=r("a-tag"),ee=r("a-menu-item"),ve=r("a-menu-divider"),ge=r("a-menu"),ye=r("a-dropdown"),be=r("a-table"),qe=r("a-drawer");return g(),P(V,null,[e(Te,{title:"需求池管理",description:"项目调研的起点，收集和管理各类研发需求"},{actions:t(()=>[e(k,{type:"primary",onClick:l[0]||(l[0]=v=>q.value=!0)},{default:t(()=>[e(b(je)),l[7]||(l[7]=n(" 新增需求 "))]),_:1,__:[7]}),e(k,{onClick:fe},{default:t(()=>[e(b(re)),l[8]||(l[8]=n(" 导出需求 "))]),_:1,__:[8]})]),default:t(()=>[s("div",It,[e(ae,{gutter:16},{default:t(()=>[e(Y,{span:18},{default:t(()=>[e(oe,{size:"middle"},{default:t(()=>[e(X,{value:a.value,"onUpdate:value":l[1]||(l[1]=v=>a.value=v),placeholder:"需求状态",style:{width:"120px"},onChange:R},{default:t(()=>[e(x,{value:""},{default:t(()=>l[9]||(l[9]=[n("全部状态")])),_:1,__:[9]}),e(x,{value:"待分析"},{default:t(()=>l[10]||(l[10]=[n("待分析")])),_:1,__:[10]}),e(x,{value:"进行中"},{default:t(()=>l[11]||(l[11]=[n("进行中")])),_:1,__:[11]}),e(x,{value:"已完成"},{default:t(()=>l[12]||(l[12]=[n("已完成")])),_:1,__:[12]}),e(x,{value:"已暂停"},{default:t(()=>l[13]||(l[13]=[n("已暂停")])),_:1,__:[13]})]),_:1},8,["value"]),e(X,{value:O.value,"onUpdate:value":l[2]||(l[2]=v=>O.value=v),placeholder:"优先级",style:{width:"100px"},onChange:R},{default:t(()=>[e(x,{value:""},{default:t(()=>l[14]||(l[14]=[n("全部")])),_:1,__:[14]}),e(x,{value:"高"},{default:t(()=>l[15]||(l[15]=[n("高")])),_:1,__:[15]}),e(x,{value:"中"},{default:t(()=>l[16]||(l[16]=[n("中")])),_:1,__:[16]}),e(x,{value:"低"},{default:t(()=>l[17]||(l[17]=[n("低")])),_:1,__:[17]})]),_:1},8,["value"]),e(X,{value:A.value,"onUpdate:value":l[3]||(l[3]=v=>A.value=v),placeholder:"需求分类",style:{width:"120px"},onChange:R},{default:t(()=>[e(x,{value:""},{default:t(()=>l[18]||(l[18]=[n("全部分类")])),_:1,__:[18]}),e(x,{value:"技术创新"},{default:t(()=>l[19]||(l[19]=[n("技术创新")])),_:1,__:[19]}),e(x,{value:"工艺改进"},{default:t(()=>l[20]||(l[20]=[n("工艺改进")])),_:1,__:[20]}),e(x,{value:"设备更新"},{default:t(()=>l[21]||(l[21]=[n("设备更新")])),_:1,__:[21]}),e(x,{value:"质量提升"},{default:t(()=>l[22]||(l[22]=[n("质量提升")])),_:1,__:[22]}),e(x,{value:"成本控制"},{default:t(()=>l[23]||(l[23]=[n("成本控制")])),_:1,__:[23]})]),_:1},8,["value"]),e(pe,{value:E.value,"onUpdate:value":l[4]||(l[4]=v=>E.value=v),placeholder:"搜索需求标题或描述",style:{width:"250px"},onSearch:R},null,8,["value"])]),_:1})]),_:1}),e(Y,{span:6},{default:t(()=>[s("div",zt,[l[24]||(l[24]=s("span",null,"需求总数",-1)),s("span",Ut,_(m.value.length),1)])]),_:1})]),_:1})]),s("div",At,[p.value.length>0?(g(),j(ae,{key:0,gutter:16,class:"card-list"},{default:t(()=>[(g(!0),P(V,null,W(p.value,v=>(g(),j(Y,{key:v.value,span:6},{default:t(()=>[s("div",{class:ze(["status-column",`status-${v.color}`])},[s("div",Mt,[s("h3",null,_(v.label),1),e(ce,{count:w(v.value),"number-style":{backgroundColor:v.color}},null,8,["count","number-style"])]),s("div",jt,[(g(!0),P(V,null,W(S(v.value),z=>(g(),j(at,{key:z.id,requirement:z,onEdit:T,onDelete:N,onStatusChange:$,onPriorityChange:de},null,8,["requirement"]))),128))])],2)]),_:2},1024))),128))]),_:1})):(g(),P("div",Bt,[e(_e,{description:"没有找到符合条件的需求",image:b(Ue).PRESENTED_IMAGE_SIMPLE},{default:t(()=>[e(k,{type:"primary",onClick:me},{default:t(()=>l[25]||(l[25]=[n("清除筛选条件")])),_:1,__:[25]})]),_:1},8,["image"])]))]),Ie(s("div",Ft,[e(be,{columns:o,"data-source":y.value,pagination:{pageSize:10},scroll:{x:1200},"row-key":"id"},{bodyCell:t(({column:v,record:z})=>[v.key==="priority"?(g(),j(K,{key:0,color:F(z.priority)},{default:t(()=>[n(_(z.priority),1)]),_:2},1032,["color"])):v.key==="status"?(g(),j(K,{key:1,color:D(z.status)},{default:t(()=>[n(_(z.status),1)]),_:2},1032,["color"])):v.key==="category"?(g(),j(K,{key:2},{default:t(()=>[n(_(z.category),1)]),_:2},1024)):v.key==="actions"?(g(),j(oe,{key:3},{default:t(()=>[e(k,{type:"link",size:"small",onClick:Q=>T(z)},{default:t(()=>l[26]||(l[26]=[n(" 编辑 ")])),_:2,__:[26]},1032,["onClick"]),e(k,{type:"link",size:"small",onClick:Q=>ne(z)},{default:t(()=>l[27]||(l[27]=[n(" 开始调研 ")])),_:2,__:[27]},1032,["onClick"]),e(ye,null,{overlay:t(()=>[e(ge,null,{default:t(()=>[e(ee,{onClick:Q=>J(z)},{default:t(()=>l[28]||(l[28]=[n("查看详情")])),_:2,__:[28]},1032,["onClick"]),e(ee,{onClick:Q=>Z(z)},{default:t(()=>l[29]||(l[29]=[n("复制需求")])),_:2,__:[29]},1032,["onClick"]),e(ve),e(ee,{onClick:Q=>N(z),style:{color:"#ff4d4f"}},{default:t(()=>l[30]||(l[30]=[n(" 删除需求 ")])),_:2,__:[30]},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(k,{type:"link",size:"small"},{default:t(()=>[l[31]||(l[31]=n(" 更多 ")),e(b(Ae))]),_:1,__:[31]})]),_:2},1024)]),_:2},1024)):L("",!0)]),_:1},8,["data-source"])],512),[[Me,u.value==="table"]])]),_:1}),e(st,{visible:q.value,"onUpdate:visible":l[5]||(l[5]=v=>q.value=v),requirement:I.value,onSave:H},null,8,["visible","requirement"]),e(qe,{open:C.value,"onUpdate:open":l[6]||(l[6]=v=>C.value=v),title:"需求详情",width:"600",placement:"right"},{default:t(()=>[f.value?(g(),j(Pt,{key:0,requirement:f.value,onEdit:T,onStartResearch:ne},null,8,["requirement"])):L("",!0)]),_:1},8,["open"])],64)}}},Gt=G(Lt,[["__scopeId","data-v-8e7d7965"]]);export{Gt as default};
