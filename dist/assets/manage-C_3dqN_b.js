import{_ as pe,d as q,h as I,i as re,c as z,a as s,j as i,w as n,l,m as ue,o as c,p as o,x as C,P as ce,z as me,t as m,C as _e,B as ge,E as ve,G as fe,H as ke,J as ye,k as f,b as x,Z as Ce,F as be,s as we,M as B,$ as d,f as M}from"./index-CLrs7Nd9.js";import{B as xe}from"./BulbOutlined-DVcxs1at.js";const je={class:"applicant-manage-container"},he={class:"page-header"},Re={class:"header-actions"},Te={class:"stats-overview"},Ie={class:"stat-icon"},ze={class:"stat-content"},$e={class:"stat-number"},Me={class:"stat-icon"},Ne={class:"stat-content"},Pe={class:"stat-number"},Oe={class:"stat-icon"},Se={class:"stat-content"},qe={class:"stat-number"},Be={class:"stat-icon"},Fe={class:"stat-content"},Je={class:"stat-number"},Ue={class:"stat-icon"},De={class:"stat-content"},Ae={class:"stat-number"},Ve={class:"stat-icon"},Le={class:"stat-content"},Ge={class:"stat-number"},Ee={class:"flow-content"},He={class:"step-description"},Qe={class:"step-status-tags"},Ze={class:"step-description"},Ke={class:"step-status-tags"},We={class:"step-description"},Xe={class:"step-status-tags"},Ye={class:"card-title-with-total"},et={class:"header-filters"},tt={key:0,class:"project-info"},st={class:"project-name"},nt={class:"project-code"},it={key:2,class:"progress-info"},ot={class:"progress-text"},at={__name:"manage",setup(lt){const R=ue(),b=q(()=>{const t=k.value.length,e=k.value.filter(u=>u.status==="material_reviewing").length,p=k.value.filter(u=>u.status==="meeting_preparing").length,y=k.value.filter(u=>u.status==="meeting_scheduled").length,$=k.value.filter(u=>u.status==="opening_passed").length,h=k.value.filter(u=>u.status==="opening_conditional").length,g=k.value.filter(u=>u.status==="opening_failed").length;return{total:t,materialReviewing:e,meetingPreparing:p,meetingScheduled:y,openingPassed:$,openingConditional:h,openingFailed:g}}),_=I({status:"",keyword:""}),T=I(!1),k=I([{id:1,projectName:"智慧城市大数据平台建设项目",projectCode:"PROJ-2024-001",status:"material_reviewing",submitTime:"2024-01-15",expectedTime:"2024-03-15",description:"构建城市级大数据分析平台，支持多源数据接入和实时分析",materials:[{id:1,name:"项目开题报告.pdf",type:"开题报告"},{id:2,name:"技术方案.docx",type:"技术方案"}],materialRejected:!0,rejectionInfo:{time:"2024-01-18",reviewer:"张审核员",comments:"材料基本符合要求，但需要完善部分内容。",rejectionReason:"1. 项目开题报告中缺少详细的研究目标和技术路线；2. 技术方案需要补充风险分析和应对措施；3. 请提供详细的项目实施计划和时间节点。"}},{id:2,projectName:"区块链供应链金融平台",projectCode:"PROJ-2024-002",status:"meeting_preparing",submitTime:"2024-01-20",expectedTime:"2024-03-20",description:"基于区块链技术的供应链金融解决方案",materials:[{id:3,name:"项目开题报告.pdf",type:"开题报告"}]},{id:3,projectName:"物联网环境监测系统",projectCode:"PROJ-2024-003",status:"meeting_scheduled",submitTime:"2024-02-01",expectedTime:"2024-04-01",description:"基于物联网技术的实时环境监测与预警系统",materials:[{id:4,name:"项目开题报告.pdf",type:"开题报告"},{id:5,name:"技术架构.pdf",type:"技术文档"}],meetingInfo:{time:"2024-02-15 14:00",location:"学术会议室A",participants:["专家A","专家B","专家C"]}},{id:4,projectName:"人工智能教育辅助平台",projectCode:"PROJ-2024-004",status:"opening_passed",submitTime:"2024-01-10",expectedTime:"2024-03-10",description:"基于AI技术的个性化教育辅助系统",materials:[{id:6,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-01-25",type:"opening_passed",feedback:"项目技术方案可行，预期目标明确，研究计划合理，专家组一致通过开题申请。建议在实施过程中加强用户体验设计和数据安全保护。",score:92}},{id:5,projectName:"5G网络优化项目",projectCode:"PROJ-2024-005",status:"opening_conditional",submitTime:"2024-01-25",expectedTime:"2024-03-25",description:"5G基站布局优化算法研究",materials:[{id:7,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-02-10",type:"opening_conditional",feedback:"项目研究方向正确，但技术路线需进一步完善。要求在3个月内补充详细的算法设计和实验方案，并重新提交审核。",requirements:"1. 补充算法的理论分析和性能评估指标；2. 提供详细的实验环境搭建方案；3. 完善项目风险评估和应对措施。"}},{id:6,projectName:"区块链电子投票系统",projectCode:"PROJ-2024-006",status:"opening_failed",submitTime:"2024-02-05",expectedTime:"2024-04-05",description:"基于区块链的安全电子投票平台",materials:[{id:8,name:"项目开题报告.pdf",type:"开题报告"}],conclusion:{time:"2024-02-20",type:"opening_failed",feedback:"项目技术方案存在重大安全隐患，研究目标与现有资源不匹配，专家组认为项目不具备实施条件，不予通过开题申请。建议重新设计技术方案后重新申请。"}}]),F=[{title:"项目信息",key:"projectInfo",width:300},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"申请时间",dataIndex:"submitTime",key:"submitTime",width:120},{title:"预期时间",dataIndex:"expectedTime",key:"expectedTime",width:120},{title:"进度",key:"progress",width:200},{title:"操作",key:"actions",width:200}],N=I({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`共 ${t} 条记录`}),J=q(()=>{let t=k.value;return _.value.status&&(t=t.filter(e=>e.status===_.value.status)),_.value.keyword&&(t=t.filter(e=>e.projectName.toLowerCase().includes(_.value.keyword.toLowerCase())||e.projectCode.toLowerCase().includes(_.value.keyword.toLowerCase()))),N.value.total=t.length,t}),U=t=>({material_reviewing:"orange",meeting_preparing:"blue",meeting_scheduled:"cyan",opening_passed:"green",opening_conditional:"orange",opening_failed:"red"})[t]||"default",P=t=>({material_reviewing:"材料审核中",meeting_preparing:"会议待组织",meeting_scheduled:"会议已安排",opening_passed:"开题通过",opening_conditional:"有条件通过",opening_failed:"开题未通过"})[t]||"未知状态",D=t=>({material_reviewing:25,meeting_preparing:50,meeting_scheduled:75,opening_passed:100,opening_conditional:100,opening_failed:100})[t]||0,A=t=>["opening_passed"].includes(t)?"success":["opening_failed"].includes(t)?"exception":"active",V=(t,e)=>({material_reviewing:e.materialRejected?"材料被驳回，需重新提交":"材料审核中",meeting_preparing:"等待会议组织",meeting_scheduled:"会议已安排",opening_passed:"开题通过",opening_conditional:"有条件通过",opening_failed:"开题未通过"})[t]||"进行中",O=t=>{var p;const e=[];return((p=t.materials)==null?void 0:p.length)>0&&e.push({key:"viewMaterials",label:"查看材料"}),["opening_passed","opening_conditional","opening_failed"].includes(t.status)&&e.push({key:"downloadReport",label:"下载报告"}),e},L=()=>{T.value=!T.value},j=t=>{_.value.status=t},G=()=>{},E=()=>{},H=()=>{R.push("/implementation/opening?tab=application-submit")},Q=t=>{var e;R.push({path:"/opening/applicant/submit",query:{resubmit:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),rejectionReason:encodeURIComponent(((e=t.rejectionInfo)==null?void 0:e.rejectionReason)||"")}})},Z=t=>{let e="";t.conclusion&&t.conclusion.requirements&&(e=t.conclusion.requirements),R.push({path:"/opening/applicant/submit",query:{improvement:"true",projectId:t.id,projectName:encodeURIComponent(t.projectName),projectCode:t.projectCode,expectedTime:t.expectedTime,description:encodeURIComponent(t.description||""),improvementRequirements:encodeURIComponent(e)}})},K=t=>{R.push(`/implementation/opening?tab=application-submit&id=${t.id}&type=new`)},W=t=>{t.conclusion?B.info({title:"开题结论详情",width:600,content:d("div",[d("p",`结论时间: ${t.conclusion.time}`),d("p",`结论类型: ${P(t.status)}`),d("div",[d("p","结论意见:"),d("div",{style:"background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px;"},t.conclusion.feedback)]),t.conclusion.requirements&&d("div",[d("p",{style:"margin-top: 16px;"},"整改要求:"),d("div",{style:"background: #fff7e6; padding: 12px; border-radius: 4px; margin-top: 8px; border: 1px solid #ffd591;"},t.conclusion.requirements)])])}):M.info("暂无结论详情")},X=t=>{B.info({title:"材料驳回详情",width:600,content:d("div",[d("p",`驳回时间: ${t.rejectionInfo.time}`),d("p",`审核人员: ${t.rejectionInfo.reviewer}`),d("p",`审核意见: ${t.rejectionInfo.comments}`),d("div",[d("p","驳回原因:"),d("div",{style:"background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px;"},t.rejectionInfo.rejectionReason)])])})},Y=({key:t},e)=>{switch(t){case"viewMaterials":M.info("查看材料功能");break;case"downloadReport":M.info("下载报告功能");break}};return re(()=>{}),(t,e)=>{const p=l("a-button"),y=l("a-col"),$=l("a-row"),h=l("a-step"),g=l("a-tag"),u=l("a-steps"),S=l("a-card"),ee=l("a-badge"),w=l("a-select-option"),te=l("a-select"),se=l("a-input-search"),ne=l("a-progress"),ie=l("a-menu-item"),oe=l("a-menu"),ae=l("a-dropdown"),le=l("a-space"),de=l("a-table");return c(),z("div",je,[s("div",he,[e[9]||(e[9]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"开题申请管理"),s("p",{class:"page-description"},"查看和管理您提交的项目开题申请")],-1)),s("div",Re,[i(p,{type:"primary",onClick:H},{default:n(()=>[i(C(ce)),e[8]||(e[8]=o(" 提交新申请 ",-1))]),_:1,__:[8]})])]),s("div",Te,[i($,{gutter:16},{default:n(()=>[i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card pending",onClick:e[0]||(e[0]=r=>j("material_reviewing"))},[s("div",Ie,[i(C(me))]),s("div",ze,[s("div",$e,m(b.value.materialReviewing),1),e[10]||(e[10]=s("div",{class:"stat-label"},"材料审核中",-1))])])]),_:1}),i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card reviewing",onClick:e[1]||(e[1]=r=>j("meeting_preparing"))},[s("div",Me,[i(C(_e))]),s("div",Ne,[s("div",Pe,m(b.value.meetingPreparing),1),e[11]||(e[11]=s("div",{class:"stat-label"},"会议待组织",-1))])])]),_:1}),i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card scheduled",onClick:e[2]||(e[2]=r=>j("meeting_scheduled"))},[s("div",Oe,[i(C(ge))]),s("div",Se,[s("div",qe,m(b.value.meetingScheduled),1),e[12]||(e[12]=s("div",{class:"stat-label"},"会议已安排",-1))])])]),_:1}),i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card completed",onClick:e[3]||(e[3]=r=>j("opening_passed"))},[s("div",Be,[i(C(ve))]),s("div",Fe,[s("div",Je,m(b.value.openingPassed),1),e[13]||(e[13]=s("div",{class:"stat-label"},"开题通过",-1))])])]),_:1}),i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card conditional",onClick:e[4]||(e[4]=r=>j("opening_conditional"))},[s("div",Ue,[i(C(xe))]),s("div",De,[s("div",Ae,m(b.value.openingConditional),1),e[14]||(e[14]=s("div",{class:"stat-label"},"有条件通过",-1))])])]),_:1}),i(y,{xs:12,sm:8,md:6,lg:4,xl:4},{default:n(()=>[s("div",{class:"stat-card rejected",onClick:e[5]||(e[5]=r=>j("opening_failed"))},[s("div",Ve,[i(C(fe))]),s("div",Le,[s("div",Ge,m(b.value.openingFailed),1),e[15]||(e[15]=s("div",{class:"stat-label"},"开题未通过",-1))])])]),_:1})]),_:1})]),i(S,{class:"flow-description",title:"开题流程说明",bordered:!1},{extra:n(()=>[i(p,{type:"link",size:"small",onClick:L},{default:n(()=>[o(m(T.value?"收起":"展开"),1)]),_:1})]),default:n(()=>[ke(s("div",Ee,[i(u,{current:3,size:"small",direction:"horizontal",status:"finish"},{default:n(()=>[i(h,{title:"提交申请",description:"准备材料并提交开题申请",status:"finish"}),i(h,{title:"材料审核",status:"finish"},{description:n(()=>[s("div",He,[e[17]||(e[17]=o(" 等待管理员审核开题材料 ",-1)),s("div",Qe,[i(g,{color:"orange",size:"small"},{default:n(()=>e[16]||(e[16]=[o("材料审核中",-1)])),_:1,__:[16]})])])]),_:1}),i(h,{title:"组织会议",status:"finish"},{description:n(()=>[s("div",Ze,[e[20]||(e[20]=o(" 等待管理员组织开题答辩会议 ",-1)),s("div",Ke,[i(g,{color:"blue",size:"small"},{default:n(()=>e[18]||(e[18]=[o("会议待组织",-1)])),_:1,__:[18]}),i(g,{color:"cyan",size:"small"},{default:n(()=>e[19]||(e[19]=[o("会议已安排",-1)])),_:1,__:[19]})])])]),_:1}),i(h,{title:"开题结论",status:"finish"},{description:n(()=>[s("div",We,[e[24]||(e[24]=o(" 根据会议结果获得最终结论 ",-1)),s("div",Xe,[i(g,{color:"green",size:"small"},{default:n(()=>e[21]||(e[21]=[o("开题通过",-1)])),_:1,__:[21]}),i(g,{color:"orange",size:"small"},{default:n(()=>e[22]||(e[22]=[o("有条件通过",-1)])),_:1,__:[22]}),i(g,{color:"red",size:"small"},{default:n(()=>e[23]||(e[23]=[o("开题未通过",-1)])),_:1,__:[23]})])])]),_:1})]),_:1})],512),[[ye,T.value]])]),_:1}),i(S,{bordered:!1},{title:n(()=>[s("div",Ye,[e[25]||(e[25]=s("span",null,"我的开题申请",-1)),i(ee,{count:b.value.total,"number-style":{backgroundColor:"#1890ff"}},null,8,["count"])])]),extra:n(()=>[s("div",et,[i(te,{value:_.value.status,"onUpdate:value":e[6]||(e[6]=r=>_.value.status=r),placeholder:"筛选状态",style:{width:"150px"},onChange:G},{default:n(()=>[i(w,{value:""},{default:n(()=>e[26]||(e[26]=[o("全部状态",-1)])),_:1,__:[26]}),i(w,{value:"material_reviewing"},{default:n(()=>e[27]||(e[27]=[o("材料审核中",-1)])),_:1,__:[27]}),i(w,{value:"meeting_preparing"},{default:n(()=>e[28]||(e[28]=[o("会议待组织",-1)])),_:1,__:[28]}),i(w,{value:"meeting_scheduled"},{default:n(()=>e[29]||(e[29]=[o("会议已安排",-1)])),_:1,__:[29]}),i(w,{value:"opening_passed"},{default:n(()=>e[30]||(e[30]=[o("开题通过",-1)])),_:1,__:[30]}),i(w,{value:"opening_conditional"},{default:n(()=>e[31]||(e[31]=[o("有条件通过",-1)])),_:1,__:[31]}),i(w,{value:"opening_failed"},{default:n(()=>e[32]||(e[32]=[o("开题未通过",-1)])),_:1,__:[32]})]),_:1},8,["value"]),i(se,{value:_.value.keyword,"onUpdate:value":e[7]||(e[7]=r=>_.value.keyword=r),placeholder:"搜索项目名称",style:{width:"200px"},onSearch:E},null,8,["value"])])]),default:n(()=>[i(de,{columns:F,"data-source":J.value,pagination:N.value,"row-key":"id",size:"middle"},{bodyCell:n(({column:r,record:a})=>[r.key==="projectInfo"?(c(),z("div",tt,[s("div",st,m(a.projectName),1),s("div",nt,m(a.projectCode),1)])):r.key==="status"?(c(),f(g,{key:1,color:U(a.status)},{default:n(()=>[o(m(P(a.status)),1)]),_:2},1032,["color"])):r.key==="progress"?(c(),z("div",it,[i(ne,{percent:D(a.status),size:"small",status:A(a.status)},null,8,["percent","status"]),s("div",ot,m(V(a.status,a)),1)])):r.key==="actions"?(c(),f(le,{key:3},{default:n(()=>[a.status==="material_reviewing"&&a.materialRejected?(c(),f(p,{key:0,type:"primary",size:"small",onClick:v=>Q(a)},{default:n(()=>e[33]||(e[33]=[o(" 重新提交材料 ",-1)])),_:2,__:[33]},1032,["onClick"])):x("",!0),a.status==="opening_conditional"?(c(),f(p,{key:1,type:"primary",size:"small",onClick:v=>Z(a)},{default:n(()=>e[34]||(e[34]=[o(" 提交整改材料 ",-1)])),_:2,__:[34]},1032,["onClick"])):x("",!0),a.status==="opening_failed"?(c(),f(p,{key:2,type:"primary",size:"small",onClick:v=>K(a)},{default:n(()=>e[35]||(e[35]=[o(" 重新提交申请 ",-1)])),_:2,__:[35]},1032,["onClick"])):x("",!0),a.status==="material_reviewing"&&a.materialRejected?(c(),f(p,{key:3,size:"small",onClick:v=>X(a)},{default:n(()=>e[36]||(e[36]=[o(" 查看驳回原因 ",-1)])),_:2,__:[36]},1032,["onClick"])):x("",!0),["opening_passed","opening_conditional","opening_failed"].includes(a.status)?(c(),f(p,{key:4,size:"small",onClick:v=>W(a)},{default:n(()=>e[37]||(e[37]=[o(" 查看详情 ",-1)])),_:2,__:[37]},1032,["onClick"])):x("",!0),O(a).length>0?(c(),f(ae,{key:5},{overlay:n(()=>[i(oe,{onClick:v=>Y(v,a)},{default:n(()=>[(c(!0),z(be,null,we(O(a),v=>(c(),f(ie,{key:v.key},{default:n(()=>[o(m(v.label),1)]),_:2},1024))),128))]),_:2},1032,["onClick"])]),default:n(()=>[i(p,{type:"link",size:"small"},{default:n(()=>[e[38]||(e[38]=o(" 更多 ",-1)),i(C(Ce))]),_:1,__:[38]})]),_:2},1024)):x("",!0)]),_:2},1024)):x("",!0)]),_:1},8,["data-source","pagination"])]),_:1})])}}},rt=pe(at,[["__scopeId","data-v-baf60698"]]);export{rt as default};
