# 项目配置向导调试指南

## 📋 **问题排查**：任务规划页面不显示

### **问题描述**
用户反馈在里程碑设置完后，点击下一步，缺失了任务规划环节的页面。

### **已修复的问题**

#### **1. 模板名称计算错误** ✅
- **问题**：`getTemplateName`计算属性使用旧的字符串映射
- **原因**：`managementConfig.template`现在存储数字ID，不是字符串
- **修复**：更新为使用`selectedTemplate.value.name`

#### **2. 默认模板未应用** ✅
- **问题**：页面加载时没有应用默认模板，导致WBS结构为空
- **修复**：在`onMounted`中调用`handleTemplateChange(1)`

#### **3. 页面结构确认** ✅
- **确认**：步骤4（`currentStep === 3`）的任务规划页面结构完整
- **确认**：操作按钮逻辑正确，包含上一步、下一步、完成配置

### **预期修复效果**

#### **第1步：基本信息** ✅
- 项目名称、编号、经理、部门等基本信息
- 预算、开始时间、结束时间、描述

#### **第2步：管理配置** ✅  
- 管理模板选择（已简化，去除优先级和风险等级）
- 工作模式选择
- 自动化设置

#### **第3步：里程碑** ✅
- 项目关键节点设置
- 计划时间、负责人、准备天数
- 里程碑描述

#### **第4步：任务规划** ✅
- 基于模板的WBS结构展示
- 任务树形结构
- 编辑、添加子项功能

### **测试步骤**

1. 访问项目配置向导页面
2. 完成第1步基本信息
3. 在第2步选择管理模板（应自动生成WBS）
4. 完成第3步里程碑设置  
5. 点击"下一步"进入第4步任务规划
6. 验证是否显示基于模板的任务结构

### **关键修复点**

```javascript
// 修复前的问题代码
const getTemplateName = computed(() => {
  const templateNames = {
    'standard': '标准研发模板',
    // ... 使用旧的字符串映射
  }
  return templateNames[managementConfig.template] || '标准研发模板'
})

// 修复后的代码  
const getTemplateName = computed(() => {
  if (selectedTemplate.value) {
    return selectedTemplate.value.name
  }
  return '标准研发模板'
})

// 添加的初始化逻辑
onMounted(() => {
  initializeData()
  // 应用默认模板（ID为1的标准研发模板）
  handleTemplateChange(1)
})
```

### **预期结果**

现在用户在里程碑设置后点击"下一步"，应该能正常看到：

1. **任务规划页面标题**："📊 创建初始WBS结构"
2. **模板提示信息**："基于[模板名称]，系统已为您生成初始任务结构"
3. **任务树形结构**：基于选择模板的阶段和任务
4. **操作按钮**：编辑、添加子项、添加根节点
5. **导航按钮**：上一步、完成配置
