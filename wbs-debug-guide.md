# 🔧 WBS任务规划页面调试指南

## 🚨 **问题现象**
任务规划页面（第4步）显示空白，没有任务树结构。

## 🔍 **可能的原因**

### **1. WBS数据未正确初始化** ❌
- 模板没有正确应用
- handleTemplateChange方法没有执行
- wbsStructure数据为空

### **2. 模板数据结构问题** ❌
- selectedTemplate找不到对应模板
- 模板的structure.phases数据缺失
- 数据映射过程出错

### **3. Vue组件渲染问题** ❌
- a-tree组件渲染失败
- CSS样式隐藏了内容
- 数据格式不符合a-tree要求

## 🛠️ **已添加的调试功能**

### **调试信息面板** 📊
现在任务规划页面会显示：
```
调试信息：
WBS结构长度: [数量]
当前步骤: [步骤号]
选中模板ID: [模板ID]
选中模板对象: [模板名称]
模板名称: [模板显示名]
WBS完整数据: [详细JSON数据]
```

### **空数据处理** 🔧
如果WBS数据为空，会显示：
```
🔧 WBS结构数据为空，请检查模板应用
[手动应用默认模板] 按钮
```

### **树形组件优化** 🌳
- 添加了 `showLine="true"` 显示连接线
- 添加了 `showIcon="false"` 移除图标
- 添加了 `v-else` 条件渲染

## 🧪 **调试步骤**

### **步骤1：查看调试信息**
1. 进入项目配置向导
2. 完成前3步到达任务规划页面
3. 查看灰色调试信息面板
4. 检查以下信息：
   - WBS结构长度是否 > 0
   - 选中模板ID是否正确（应该是1）
   - 选中模板对象是否找到
   - WBS数据是否有内容

### **步骤2：查看控制台日志**
打开浏览器开发者工具，查看Console：
```
handleTemplateChange 被调用，templateId: 1
找到的模板: {id: 1, name: "标准研发模板", ...}
模板结构: {phases: [...], milestones: [...]}
更新后的WBS结构: [{key: "phase-0", title: "需求分析阶段", ...}, ...]
```

### **步骤3：手动应用模板**
如果WBS数据为空：
1. 点击"手动应用默认模板"按钮
2. 观察数据是否更新
3. 查看控制台是否有错误信息

## 🎯 **预期正常状态**

### **调试信息应该显示**：
```
WBS结构长度: 5
当前步骤: 3
选中模板ID: 1
选中模板对象: 标准研发模板
模板名称: 标准研发模板
```

### **WBS树应该显示**：
```
📁 需求分析阶段 (10天)
  ├── 需求收集
  ├── 需求分析  
  └── 需求评审
📁 设计阶段 (15天)
  ├── 概要设计
  ├── 详细设计
  └── 设计评审
📁 开发阶段 (30天)
  ├── 前端开发
  ├── 后端开发
  └── 接口联调
📁 测试阶段 (15天)
  ├── 单元测试
  ├── 集成测试
  └── 系统测试
📁 上线阶段 (5天)
  ├── 部署准备
  ├── 生产发布
  └── 验证测试
```

## 🔧 **常见问题解决**

### **问题1：WBS结构长度为0**
**解决**：点击"手动应用默认模板"按钮

### **问题2：选中模板对象为"未找到"**
**解决**：检查managementConfig.template值，应该是1

### **问题3：模板有数据但树不显示**
**解决**：检查浏览器控制台是否有JavaScript错误

### **问题4：树形组件显示但没有展开**
**解决**：点击展开按钮或检查default-expanded-keys

## 📝 **下一步操作**

1. **立即测试**：刷新页面，进入配置向导第4步
2. **查看调试信息**：确认WBS数据状态
3. **反馈结果**：告诉我看到的具体调试信息
4. **手动修复**：如果数据为空，点击手动应用按钮

现在请刷新页面测试，并告诉我调试信息面板显示了什么内容！🔍